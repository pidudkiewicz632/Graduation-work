(function(t){function e(e){for(var i,n,r=e[0],l=e[1],d=e[2],u=0,m=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(m.length)m.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},s={index:0},o=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;o.push([1,"chunk-vendors"]),a()})({"017c":function(t,e){},"03c0":function(t,e,a){},"04b0":function(t,e,a){},"0523":function(t,e,a){"use strict";var i=a("538f"),s=a.n(i);s.a},"06f4":function(t,e,a){"use strict";var i=a("bb1e"),s=a.n(i);s.a},"0c16":function(t,e,a){},"0c1d":function(t,e,a){},1:function(t,e,a){t.exports=a("ef1c")},"119b":function(t,e,a){"use strict";var i=a("e6c7"),s=a.n(i);s.a},1263:function(t,e,a){},1655:function(t,e,a){"use strict";e["a"]={data:function(){return{loading:!1}},methods:{showMessage:function(t,e,a){var i=this;this.$bvModal.msgBoxOk(t,{title:e,size:"sm",buttonSize:"sm",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0",centered:!0}).then((function(){"login"===a?window.location.href="login.html":"/settings"===a?window.location.href="/settings":a&&i.$router.push(a)}))},fetchErr:function(t){var e=this;t.response?401===t.response.status?this.$store.dispatch("loginOut").then((function(){e.showMessage("Błąd autoryzacji! Zaloguj się ponownie.","Błąd","login")})):405===t.response.status?this.$router.push("/home"):400===t.response.status&&this.showMessage(t.response.data.message,"Błąd","/"):this.showMessage("Błąd serwera, proszę spróbować później.","Błąd","/")}}}},"167e":function(t,e,a){"use strict";var i=a("03c0"),s=a.n(i);s.a},"19bc":function(t,e,a){"use strict";var i=a("b4c2"),s=a.n(i);s.a},"21fc":function(t,e,a){},"22ea":function(t,e,a){"use strict";var i=a("0c16"),s=a.n(i);s.a},2569:function(t,e,a){"use strict";var i=a("9a5e"),s=a.n(i);s.a},"2ec3":function(t,e,a){"use strict";var i=a("3590"),s=a.n(i);s.a},"2fd2":function(t,e,a){},3137:function(t,e,a){"use strict";var i=a("41f6"),s=a.n(i);s.a},"320f":function(t,e,a){},3590:function(t,e,a){},"41f6":function(t,e,a){},4360:function(t,e,a){"use strict";a("a4d3"),a("e01a"),a("b0c0"),a("d3b7");var i=a("2b0e"),s=a("2f62"),o=a("bc3a"),n=a.n(o);i["default"].use(s["a"]),n.a.defaults.baseURL="http://77.55.214.54:8000/api/",e["a"]=new s["a"].Store({state:{userData:JSON.parse(localStorage.getItem("user-data"))||"",numberOfNewNotifications:0,addDiscardData:{dateOfPayment:null,description:null,name:null,type:"oneTime",cyclicalInterval:null,members:[],spreadType:"spreading"},currentGroupInfo:{groupId:null,userPermission:null,groupDetails:[],groupMembers:[],groupDiscards:[]},discardDetails:{discardInfo:{idDiscard:{}},userObligation:null,payments:[],userPermission:!1,allObligations:[]}},getters:{isLogIn:function(t){return Boolean(t.userData)},isLog:function(){return Boolean(JSON.parse(localStorage.getItem("user-data")))},login:function(t){return t.userData.login},userId:function(t){return t.userData.id},token:function(t){return t.userData.token},addDiscardDateOfPayment:function(t){return t.addDiscardData.dateOfPayment},addDiscardDescription:function(t){return t.addDiscardData.description},addDiscardName:function(t){return t.addDiscardData.name},addDiscardType:function(t){return t.addDiscardData.type},addDiscardCyclicalInterval:function(t){return t.addDiscardData.cyclicalInterval},addDiscardMembers:function(t){return t.addDiscardData.members},addDiscardSpreadType:function(t){return t.addDiscardData.spreadType},groupInfoPermission:function(t){return t.currentGroupInfo.userPermission},groupInfoId:function(t){return t.currentGroupInfo.groupId},groupInfoDetails:function(t){return t.currentGroupInfo.groupDetails},groupInfoMembers:function(t){return t.currentGroupInfo.groupMembers},groupInfoDiscards:function(t){return t.currentGroupInfo.groupDiscards},discardDetailsInfo:function(t){return t.discardDetails.discardInfo},discardDetailsUserObligation:function(t){return t.discardDetails.userObligation},discardDetailsUserPermission:function(t){return t.discardDetails.userPermission},discardDetailsPayments:function(t){return t.discardDetails.payments},discardDetailsAllObligation:function(t){return t.discardDetails.allObligations},numberOfNewNotifications:function(t){return t.numberOfNewNotifications}},mutations:{loginSuccess:function(t,e){t.userData=e},deleteToken:function(t){t.userData=""},addDiscardDateOfPayment:function(t,e){t.addDiscardData.dateOfPayment=e},addDiscardName:function(t,e){t.addDiscardData.name=e},addDiscardDescription:function(t,e){t.addDiscardData.description=e},addDiscardType:function(t,e){t.addDiscardData.type=e},addDiscardCyclicalInterval:function(t,e){t.addDiscardData.cyclicalInterval=e},addDiscardMembers:function(t,e){t.addDiscardData.members=e},addDiscardSpreadType:function(t,e){t.addDiscardData.spreadType=e},groupInfoPermission:function(t,e){t.currentGroupInfo.userPermission=e},groupInfoId:function(t,e){t.currentGroupInfo.groupId=e},groupInfoDetails:function(t,e){t.currentGroupInfo.groupDetails=e},groupInfoMembers:function(t,e){t.currentGroupInfo.groupMembers=e},groupInfoDiscards:function(t,e){t.currentGroupInfo.groupDiscards=e},numberOfNewNotifications:function(t,e){t.numberOfNewNotifications=e},discardDetails:function(t,e){t.discardDetails.discardInfo=e.discard,t.discardDetails.userObligation=e.userObligation,t.discardDetails.allObligations=e.obligations,t.discardDetails.payments=e.payments,t.discardDetails.userPermission="admin"===e.permission||"owner"===e.permission}},actions:{setLogin:function(t,e){var a=t.commit,i=t.state,s=i.userData;s.login=e,localStorage.setItem("user-data",JSON.stringify(s)),a("loginSuccess",s)},loginIn:function(t,e){var a=t.commit;return new Promise((function(t,i){n.a.post("user/login",e).then((function(e){var i=e.data.user;localStorage.setItem("user-data",JSON.stringify(i)),a("loginSuccess",i),t(e)})).catch((function(t){localStorage.removeItem("user-data"),a("deleteToken"),i(t)}))}))},loginOut:function(t){var e=t.commit;return new Promise((function(t){localStorage.removeItem("user-data"),e("deleteToken"),t()}))},getDiscardDetails:function(t,e){var a=t.commit;return new Promise((function(t,i){n.a.get("discard/group/details/".concat(e)).then((function(e){e.data.data&&a("discardDetails",e.data.data),t(e.data.data)})).catch((function(t){i(t)}))}))},refreshNumberOfNotifications:function(t){var e=t.commit;n.a.get("/notification/number").then((function(t){null!==t.data.data&&(e("numberOfNewNotifications",t.data.data),console.log(t.data.data))}))}},modules:{}})},"47c0":function(t,e,a){},"49ed":function(t,e,a){},"4ad7":function(t,e,a){"use strict";var i=a("5165"),s=a.n(i);s.a},5165:function(t,e,a){},"538f":function(t,e,a){},5780:function(t,e,a){},5792:function(t,e,a){"use strict";var i=a("7900"),s=a.n(i);s.a},5983:function(t,e,a){"use strict";var i=a("0c1d"),s=a.n(i);s.a},"66fe":function(t,e,a){},"68ed":function(t,e,a){"use strict";var i=a("73af"),s=a.n(i);s.a},"6aab":function(t,e,a){},7269:function(t,e,a){},"729a":function(t,e,a){"use strict";var i=a("d419"),s=a.n(i);s.a},"73af":function(t,e,a){},"786b":function(t,e,a){},7900:function(t,e,a){},"7bd3":function(t,e,a){"use strict";var i=a("935d"),s=a.n(i);s.a},"863f":function(t,e,a){"use strict";var i=a("a539"),s=a.n(i);s.a},"86f5":function(t,e,a){"use strict";var i=a("d84b"),s=a.n(i);s.a},8778:function(t,e,a){"use strict";var i=a("2fd2"),s=a.n(i);s.a},"87d1":function(t,e,a){"use strict";var i=a("5780"),s=a.n(i);s.a},"8bcd":function(t,e,a){"use strict";var i=a("66fe"),s=a.n(i);s.a},"935d":function(t,e,a){},"9a5e":function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.84c243aa.svg"},"9f14":function(t,e,a){"use strict";var i=a("d1a8"),s=a.n(i);s.a},a2a2:function(t,e,a){"use strict";var i=a("e5a2"),s=a.n(i);s.a},a539:function(t,e,a){},af54:function(t,e,a){"use strict";var i=a("786b"),s=a.n(i);s.a},b31e:function(t,e,a){"use strict";var i=a("7269"),s=a.n(i);s.a},b4c2:function(t,e,a){},bb1e:function(t,e,a){},bc42:function(t,e,a){"use strict";var i=a("d0e1"),s=a.n(i);s.a},c014:function(t,e,a){"use strict";var i=a("1263"),s=a.n(i);s.a},c78a:function(t,e,a){"use strict";var i=a("47c0"),s=a.n(i);s.a},c96f:function(t,e,a){"use strict";var i=a("d94c"),s=a.n(i);s.a},ce8e:function(t,e,a){"use strict";var i=a("6aab"),s=a.n(i);s.a},d0e1:function(t,e,a){},d1a8:function(t,e,a){},d3f9:function(t,e,a){"use strict";var i=a("21fc"),s=a.n(i);s.a},d419:function(t,e,a){},d84b:function(t,e,a){},d8df:function(t,e,a){"use strict";var i=a("ff01"),s=a.n(i);s.a},d94c:function(t,e,a){},ddfe:function(t,e,a){"use strict";var i=a("320f"),s=a.n(i);s.a},e5a2:function(t,e,a){},e6c7:function(t,e,a){},ef1c:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=a("bc3a"),o=a.n(s),n=a("01ac"),r=a("a7fe"),l=a.n(r),d=a("5f5b"),c=a("b1e0"),u=a("1655"),m=a("017c"),p=a.n(m),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.isLoginIn?a("div",{staticClass:"pageContent"},[a("HeadBar",{attrs:{linksInput:t.links}}),a("transition",{staticClass:"mt-3",attrs:{name:"routerAnimation",mode:"out-in"}},[a("router-view")],1)],1):t._e(),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},g=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",{staticClass:"row justify-content-between align-items-center col-12 sticky-top\nm-0 p-3 mb-3",attrs:{id:"header"}},[i("div",{staticClass:"row align-items-center ml-1",on:{click:t.toHome}},[i("img",{staticClass:"img-fluid",attrs:{width:"40",alt:"Vue logo",src:a("9b19")}}),i("div",{staticClass:"greenText font-weight-bol"},[t._v("CashFriends")])]),i("div",{staticClass:"row flex-row-reverse ml-auto"},[i("b-icon-justify",{directives:[{name:"b-toggle",rawName:"v-b-toggle.navBar",modifiers:{navBar:!0}}],staticClass:"greenIcon mx-3",attrs:{"font-scale":"2"}}),i("div",{on:{click:t.toNotifications}},[i("b-icon-bell-fill",{staticClass:"greenIcon",attrs:{"font-scale":"2"}}),i("b-badge",{staticClass:"notifiCounter rounded",attrs:{variant:"light"}},[t._v(" "+t._s(t.notificationNumber)+" ")])],1),i("b-sidebar",{attrs:{id:"navBar","z-index":"100",right:"",shadow:""},scopedSlots:t._u([{key:"footer",fn:function(){return[i("div",{staticClass:"pb-2 d-flex align-items-center justify-content-center pt-3",attrs:{id:"loginPanel"}},[i("b-avatar",{attrs:{variant:"light",src:t.avatarLink}}),i("div",{staticClass:"mx-3 font-weight-bold"},[t._v(t._s(t.login))]),i("div",{staticClass:"p-1",attrs:{id:"logOut"}},[i("b-icon-arrow-right-square-fill",{attrs:{id:"logIcon","font-scale":"2"},on:{click:t.logOut}})],1)],1)]},proxy:!0}])},[i("b-nav",{attrs:{vertical:""}},t._l(t.links,(function(e,a){return i("router-link",{key:a,staticClass:"my-2",attrs:{to:e.route}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)])},v=[],b=(a("99af"),{name:"HeadBar",data:function(){return{links:[],avatarLink:"",login:""}},props:{linksInput:{type:Array,required:!0}},computed:{notificationNumber:function(){return this.$store.getters.numberOfNewNotifications}},mounted:function(){this.links=this.linksInput,this.login=this.$store.getters.login,this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.$store.getters.userId)},methods:{logOut:function(){this.$store.dispatch("loginOut").then((function(){window.location.href="/login.html"}))},toNotifications:function(){this.$router.push({path:"/notifications"})},toHome:function(){this.$router.push({path:"/"})}}}),y=b,x=(a("2569"),a("2877")),D=Object(x["a"])(y,h,v,!1,null,null,null),w=D.exports,C={name:"Index",components:{HeadBar:w},data:function(){return{login:"",showCover:!1,links:[{route:"/",name:"Home"},{route:"/discards",name:"Zrzutki"},{route:"/groups",name:"Grupy"},{route:"/notifications",name:"Powiadomienia"},{route:"/invites",name:"Zaproszenia"},{route:"/settings",name:"Ustawienia"}]}},computed:{isLoginIn:function(){return this.$store.getters.isLogIn}},beforeCreate:function(){this.loading=!0,this.$store.getters.isLogIn||(window.location.href="login.html");var t=this;t.$store.dispatch("refreshNumberOfNotifications"),setInterval((function(){t.$store.dispatch("refreshNumberOfNotifications")}),3e4)}},k=C,I=(a("863f"),Object(x["a"])(k,f,g,!1,null,null,null)),_=I.exports,M=a("8c4f"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 mb-3",attrs:{id:"groupDetailsWrapper"}},[a("div",{staticClass:"greenBadge col-12 row justify-content-between align-items-center mx-0 py-1"},[a("b-icon-triangle-fill",{staticClass:"my-2",attrs:{rotate:"270"},on:{click:t.changeOverlap}}),a("h2",{staticClass:"mt-3"},[t._v(" "+t._s(t.currentOverlap)+" ")]),a("b-icon-triangle-fill",{staticClass:"my-2",attrs:{rotate:"90"},on:{click:t.changeOverlap}})],1),a("div",{staticClass:"py-2 px-4"},["Informacje"===t.currentOverlap?a("GroupInfo",{attrs:{"group-id":t.groupId}}):t._e(),"Zrzutki"===t.currentOverlap?a("GroupDiscards",{attrs:{"group-id":t.groupId}}):t._e()],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},O=[],z=(a("4160"),a("a9e3"),a("b680"),a("159b"),{computed:{userPermission:{get:function(){return this.$store.getters.groupInfoPermission},set:function(t){this.$store.commit("groupInfoPermission",t)}},groupDetails:{get:function(){return this.$store.getters.groupInfoDetails},set:function(t){this.$store.commit("groupInfoDetails",t)}},groupMembers:{get:function(){return this.$store.getters.groupInfoMembers},set:function(t){this.$store.commit("groupInfoMembers",t)}},groupDiscards:{get:function(){return this.$store.getters.groupInfoDiscards},set:function(t){this.$store.commit("groupInfoDiscards",t)}}}}),S={methods:{sortingAsc:function(t,e){return t<e?-1:t>e?1:0},sortingDsc:function(t,e){return t<e?1:t>e?-1:0}}},T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-2 px-4"},[a("div",{staticClass:"row justify-content-center align-items-center mb-3 mt-2"},[a("b-avatar",{attrs:{variant:"light",src:t.logoLink}}),a("div",{staticClass:"row justify-content-center align-items-center"},[a("h3",{staticClass:"mt-3 justify-content-center text-red mx-3"},[t._v(" "+t._s(t.groupDetails.name)+" ")]),t.userPermission?a("b-link",{staticClass:"greenText mt-2",on:{click:t.toEdit}},[t._v(" Edytuj ")]):t._e()],1)],1),t.groupDetails.description?a("div",[t._v(" "+t._s(t.groupDetails.description)+" ")]):a("div",[t._v(" Brak Opisu ")]),a("div",{staticClass:"row my-4 justify-content-center align-items-center"},[a("h3",{staticClass:"mt-2"},[t._v("Członkowie")]),t.userPermission?a("b-link",{staticClass:"greenText ml-3 float-right",on:{click:t.toEditMembers}},[t._v(" Edytuj ")]):t._e()],1),a("div",{staticClass:"row justify-content-center mb-4"},t._l(t.groupMembers,(function(t){return a("GroupMembersItem",{key:t.id,attrs:{"member-info":t}})})),1),t.userPermission?a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.showConfirmModal}},[t._v("Usuń")]):t._e(),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},j=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-badge",{staticClass:"greenBadge d-flex justify-content-center align-items-center m-1 p-1"},[a("b-avatar",{attrs:{variant:"light",src:t.avatarLink}}),a("div",[a("div",{staticClass:"font-weight-bold m-2"},[t._v(" "+t._s(t.memberInfo.idUser.login)+" ")]),a("div",[t._v(" "+t._s(t.permission)+" ")])])],1)},$=[],E={name:"GroupMembersItem",props:{memberInfo:{type:Object,required:!0}},data:function(){return{avatarLink:""}},computed:{permission:function(){switch(this.memberInfo.permission){case"deleted":return"usunięty";case"owner":return"właściciel";default:return this.memberInfo.permission}}},mounted:function(){this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.memberInfo.idUser.id)}},G=E,R=Object(x["a"])(G,N,$,!1,null,"4b93d0d0",null),Y=R.exports,A={name:"GroupInfo",mixins:[z],props:["groupId"],components:{GroupMembersItem:Y},data:function(){return{logoLink:""}},methods:{toEdit:function(){this.$router.push({path:"/group/edit/".concat(this.groupId)})},toEditMembers:function(){this.$router.push({path:"/group/edit/members/".concat(this.groupId)})},showConfirmModal:function(){var t=this;this.confirmModalValue="",this.$bvModal.msgBoxConfirm("Czy na pewno chcesz usunąć?",{okTitle:"Tak",cancelTitle:"Nie"}).then((function(e){if(e){t.loading=!0;var a=new FormData;a.append("groupId",t.groupId),t.axios.post("/group/delete",a).then((function(){t.showMessage("Grupa została usunięta.","Usunięcie grupy","/"),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}}))}},mounted:function(){this.logoLink="".concat("http://77.55.214.54:8000/api/","group/logo/").concat(this.groupId)}},F=A,q=Object(x["a"])(F,T,j,!1,null,null,null),L=q.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-2 px-2",attrs:{id:"groupDiscardsWrapper"}},[a("b-form-input",{staticClass:"col-xl-3 col-lg-4 col-md-5 col-6 mx-auto",attrs:{size:"sm",placeholder:"Nazwa"},model:{value:t.discardNameSearch,callback:function(e){t.discardNameSearch=e},expression:"discardNameSearch"}}),a("transition-group",{staticClass:"row justify-content-center discardsList mx-auto\ncol-12",class:{fewElements:t.numberOfItems<=t.itemsPerPage},attrs:{name:"list"}},t._l(t.selectedItems,(function(e){return a("GroupDiscardListItem",{key:e.id,attrs:{"discard-data":e},on:{toDetails:t.toDiscardDetails}})})),1),t.numberOfItems>t.itemsPerPage?a("b-pagination",{staticClass:"pagination",attrs:{align:"center","total-rows":t.numberOfItems,"per-page":t.itemsPerPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),0!==t.selectedItems.length||t.loading?t._e():a("p",{staticClass:"mt-5"},[t._v(" Brak Zrzutek")]),a("FilterButtonsModal",{attrs:{link:t.linkToAdd,"permission-add":t.userPermission}},[a("div",{staticClass:"row mx-auto align-items-start justify-content-center bv-d-md-down-none\n    mx-auto mb-2"},[a("div",{staticClass:"col-sm-7 col-lg-8 col-xl-10"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",[a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Od:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Do:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-5 col-xl-7"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",[a("PriceInput",{key:"amountFrom",staticClass:"col-6",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountTo",staticClass:"col-6",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1),t.userPermission?a("div",{staticClass:"col-4"},[a("div",{staticClass:"text-left"},[t._v("Wyświetl")]),a("b-form-select",{staticClass:"mx-auto",attrs:{options:t.whereOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.whereValue,callback:function(e){t.whereValue=e},expression:"whereValue"}})],1):t._e(),a("b-form-group",{staticClass:"col-6"},[a("div",{staticClass:"text-left"},[t._v("Pokaż")]),a("b-form-checkbox-group",{attrs:{id:"checkbox-group-1",options:t.showOptions,name:"flavour-1"},model:{value:t.selectedShow,callback:function(e){t.selectedShow=e},expression:"selectedShow"}})],1)],1),a("div",{staticClass:"row justify-content-center mb-4 d-lg-none"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Od:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Do:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("PriceInput",{key:"amountFromModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountToModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"mx-auto",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"mx-auto",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1),t.userPermission?a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Gdzie")]),a("b-form-select",{staticClass:"mx-auto",attrs:{options:t.whereOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.whereValue,callback:function(e){t.whereValue=e},expression:"whereValue"}})],1):t._e(),a("b-form-group",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Pokaż")]),a("b-form-checkbox-group",{attrs:{id:"checkbox-group-1",options:t.showOptions,name:"flavour-1"},model:{value:t.selectedShow,callback:function(e){t.selectedShow=e},expression:"selectedShow"}})],1)],1)]),t.loading?a("b-spinner",{staticStyle:{width:"3rem",height:"3rem"}}):t._e()],1)},V=[],W=(a("4de4"),a("caad"),a("c975"),a("d81d"),a("b0c0"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"groupDiscardItemWrapper col-12 col-sm-11 col-md-9 my-3 p-0 mx-auto",on:{click:function(e){return t.$emit("toDetails",t.discardData.id)}}},[a("div",{staticClass:"content shadow"},[a("div",{staticClass:"row align-items-center justify-content-between\n    greenBadge shadow col-12 py-2 ml-0"},[a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.discardData.name)+" ")]),a("b-icon-triangle-fill",{attrs:{"font-scale":"1",rotate:"90"}})],1),a("b-row",{staticClass:"p-3 align-items-center justify-content-between"},[a("b-col",{staticClass:"text-left font-weight-bold col-6"},[a("div",[t._v("Termin")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.dateOfPayment)+" ")])]),a("b-col",{staticClass:"text-right font-weight-bold col-5"},["paid"===t.discardData.tag?a("div",[a("div",[t._v("Nadpłata")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountOver)+" ")])]):"others"===t.discardData.tag?a("div",[a("div",[t._v("Suma")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.sum)+" ")])]):a("div",[a("div",[t._v("Pozostało")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountLeft)+" ")])])])],1)],1)])}),Z=[],B={name:"GroupDiscardListItem",props:{discardData:{type:Object,required:!0}},mounted:function(){this.discardData.dateOfPayment=this.$dayjs(this.discardData.dateOfPayment).format("YYYY-MM-DD")}},H=B,J=(a("ddfe"),Object(x["a"])(H,W,Z,!1,null,"e82770da",null)),K=J.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-row",{staticClass:"row align-items-center justify-content-center"},[t.label?a("b-form-group",{staticClass:"align-items-center ml-1",attrs:{label:t.label,"label-cols-md":"3",state:t.validateStatus,"label-size":"sm"}},[a("b-input",{staticClass:"col-10",attrs:{value:t.value,size:"sm",type:"number",state:t.validateStatus,step:"any",min:t.min,max:t.max},on:{keypress:function(e){return t.key(e)},change:t.formatPrice}})],1):a("b-input",{staticClass:"col-12",attrs:{value:t.value,size:"sm",type:"number",state:t.validateStatusProp,step:"any",min:t.min,max:t.max},on:{keypress:function(e){return t.key(e)},change:t.formatPrice}})],1)},X=[],tt=(a("d3b7"),a("ac1f"),a("25f0"),a("5319"),{name:"PriceInput",props:{validateStatusProp:Boolean,label:String,min:Number,max:Number,value:Number},data:function(){return{minVal:null,maxVal:null,validateStatus:null}},methods:{key:function(t){var e=t.keyCode;45!==e&&43!==e&&101!==e||t.preventDefault()},formatPrice:function(t){var e=t.toString().replace(",",".");e=parseFloat(e.replace(/[^\d.]/g,"")).toFixed(2),isNaN(e)&&(e="0"),e=Number(e),this.$emit("input",e)}},created:function(){this.validateStatus=this.validateStatusProp}}),et=tt,at=Object(x["a"])(et,Q,X,!1,null,"3d4ceb90",null),it=at.exports,st=(a("fb6a"),{data:function(){return{currentPage:1,itemsPerPage:10}},methods:{perPageChange:function(){this.currentPage=1}},computed:{selectedItems:function(){var t=this.currentPage*this.itemsPerPage,e=t-this.itemsPerPage;return this.filtredItems.slice(e,t)},numberOfItems:function(){return this.filtredItems.length}}}),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fixed-bottom d-flex mx-auto col-12 col-sm-10  col-md-9 col-lg-7\n      pb-2",attrs:{id:"bottomPanel"}},[a("b-modal",{attrs:{id:"modalFilter",size:"xl",title:"Filtrowanie","hide-footer":""}},[t._t("default"),a("b-button",{staticClass:"col-3 mx-auto",attrs:{id:"buttonModal",block:""},on:{click:function(e){return t.$bvModal.hide("modalFilter")}}},[t._v(" Filtruj ")])],2),a("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.modalFilter",modifiers:{modalFilter:!0}}],staticClass:"mr-auto"},[a("b-icon-filter",{staticClass:"rounded m-2",attrs:{"font-scale":"3"}})],1),a("b-link",{staticClass:"ml-auto",attrs:{to:t.link}},[t.permissionAdd?a("b-icon-plus",{staticClass:"rounded m-2",attrs:{to:"/addGroup","font-scale":"3",rotate:"90"}}):t._e()],1)],1)},nt=[],rt={name:"filterButtonsModal",props:{link:{type:String,required:!0},permissionAdd:{type:Boolean}}},lt=rt,dt=(a("119b"),Object(x["a"])(lt,ot,nt,!1,null,null,null)),ct=dt.exports,ut={name:"GroupDiscards",mixins:[z,S,st],props:{groupId:String},components:{GroupDiscardListItem:K,PriceInput:it,FilterButtonsModal:ct},data:function(){return{dateFrom:null,dateTo:null,amountTo:null,amountFrom:null,discardNameSearch:"",linkToAdd:"",itemsPerPage:10,sortingValue:5,whereValue:null,selectedShow:["others","paid","unpaid"],datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"},pageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:30,text:"30"}],whereOptions:[{value:null,text:"Wszystko"},{value:!0,text:"gdzie uczestniczę"},{value:!1,text:"gdzie nie uczestniczę"}],sortingOptions:[{value:1,text:"Rosnąco po nazwie"},{value:2,text:"Malejąco po nazwie"},{value:3,text:"Rosnąco po składce"},{value:4,text:"Malejąco po składce"},{value:5,text:"Rosnąco po dacie"},{value:6,text:"Malejąco po dacie"}],showOptions:[{text:"Opłacone",value:"paid"},{text:"Nieopłacone",value:"unpaid"}]}},computed:{filtredItems:function(){var t=this,e=this.groupDiscards;switch(e=this.selectedShow.length?e.filter((function(e){if(!t.selectedShow.includes(e.tag))return!1;if(t.discardNameSearch&&-1===e.name.toUpperCase().indexOf(t.discardNameSearch.toUpperCase()))return!1;if(null!==t.whereValue&&t.whereValue!==e.takePart)return!1;if(t.amountFrom){var a=e.amountLeft||e.amountOver||e.sum;if(a<t.amountFrom)return!1}if(t.amountTo){var i=e.amountLeft||e.amountOver||e.sum;if(i>t.amountTo)return!1}if(t.dateFrom){var s=t.$dayjs(t.dateFrom),o=t.$dayjs(e.dateOfPayment);if(o<s)return!1}if(t.dateTo){var n=t.$dayjs(t.dateTo),r=t.$dayjs(e.dateOfPayment);if(r>n)return!1}return!0})):[],this.sortingValue){case 1:e=e.sort((function(e,a){return t.sortingAsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 2:e=e.sort((function(e,a){return t.sortingDsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 3:e=e.sort((function(e,a){var i=e.amountLeft||e.amountOver||e.sum,s=a.amountLeft||a.amountOver||a.sum;return t.sortingAsc(i,s)}));break;case 4:e=e.sort((function(e,a){var i=e.amountLeft||e.amountOver||e.sum,s=a.amountLeft||a.amountOver||a.sum;return t.sortingDsc(i,s)}));break;case 5:e=e.sort((function(e,a){return t.sortingAsc(e.dateOfPayment,a.dateOfPayment)}));break;default:e=e.sort((function(e,a){return t.sortingDsc(e.dateOfPayment,a.dateOfPayment)}))}return e}},methods:{toDiscardDetails:function(t){this.$router.push({path:"/discard/details/0/".concat(t)})}},mounted:function(){if(this.groupDiscards.length){var t=this.groupDiscards.map((function(t){return new Date(t.dateOfPayment)})),e=this.groupDiscards.map((function(t){return"unpaid"===t.tag?t.amountLeft:"paid"===t.tag?t.amountOver:t.sum}));this.amountFrom=Math.min.apply(null,e),this.amountTo=Math.max.apply(null,e),this.dateFrom=this.$dayjs(Math.min.apply(null,t)).format("YYYY-MM-DD"),this.dateTo=this.$dayjs(Math.max.apply(null,t)).format("YYYY-MM-DD")}this.linkToAdd="/group/discard/add/".concat(this.groupId)}},mt=ut,pt=Object(x["a"])(mt,U,V,!1,null,null,null),ft=pt.exports,gt={name:"GroupDetails",mixins:[z,S],components:{GroupInfo:L,GroupDiscards:ft},props:["groupId"],data:function(){return{currentOverlap:"Informacje"}},methods:{changeOverlap:function(){this.currentOverlap="Informacje"===this.currentOverlap?"Zrzutki":"Informacje"}},mounted:function(){var t=this;this.loading=!0,this.axios.get("/group/details/".concat(this.groupId)).then((function(e){if(e.data.info)return t.userPermission="admin"===e.data.permission||"owner"===e.data.permission,t.groupDetails=e.data.info,t.groupDiscards=e.data.discards,t.groupDiscards.forEach((function(t){t.tag=t.paidIn>=t.amount?"paid":"unpaid";var e=(t.amount-t.paidIn).toFixed(2);"paid"===t.tag?t.amountOver=e<0?-1*e:e:t.amountLeft=Number(e)})),t.groupMembers=t.groupDetails.members.sort((function(e,a){return t.sortingAsc(e.permission,a.permission)})),void(t.loading=!1);t.showMessage("Coś poszło nie tak","Szczegóły zrzutki","/groups"),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("groups");t.loading=!1,t.fetchErr(e)}))}},ht=gt,vt=(a("b31e"),Object(x["a"])(ht,P,O,!1,null,"199492ab",null)),bt=vt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GroupForm",{attrs:{"edited-group-id":t.groupId,"is-edit":!0}})},xt=[],Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-8 darkBg col-md-7 col-lg-5 col-xl-4 p-3",attrs:{id:"addGroupWrapper"}},[a("h2",{staticClass:"mb-3"},[t._v(" "+t._s(t.formTitle)+" ")]),a("b-form",{staticClass:"d-flex flex-column col-10 mx-auto",on:{submit:function(e){return e.preventDefault(),t.addGroup(e)}}},[a("b-form-group",{staticClass:"text-left",attrs:{label:"Nazwa*","invalid-feedback":t.validationMessages.groupName,state:t.validationRequiredStates.groupName}},[a("b-form-input",{staticClass:"my-2",attrs:{placeholder:"Nazwa Grupy",size:"sm",state:t.validationRequiredStates.groupName},on:{input:t.validationName},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),a("b-form-group",{staticClass:"text-left",attrs:{label:"Opis","invalid-feedback":t.validationMessages.groupDescription,state:t.validationNotRequiredStates.groupDescription}},[a("b-form-textarea",{staticClass:"my-2",attrs:{state:t.validationNotRequiredStates.groupDescription,placeholder:"Opis grupy"},on:{input:t.validationDescription},model:{value:t.groupDescription,callback:function(e){t.groupDescription=e},expression:"groupDescription"}})],1),a("b-form-group",{staticClass:"text-left",attrs:{label:"Logo","invalid-feedback":t.validationMessages.logo,state:t.validationNotRequiredStates.logo}},[a("b-form-file",{staticClass:"my-2 greenText",attrs:{size:"sm",plain:""},on:{change:function(e){return t.uploadLogo(e)}}})],1),!1===t.isEdit?a("b-form-group",{staticClass:"d-flex justify-content-center text-left",attrs:{label:"Dodawanie Użytkowników","invalid-feedback":t.validationMessages.groupMember,state:t.validationNotRequiredStates.groupMember}},[a("b-input-group-append",[a("b-form-input",{staticClass:"mr-1",attrs:{size:"sm",placeholder:"Dodawanie Użytkowników",list:"users",state:t.validationNotRequiredStates.groupMember},model:{value:t.groupMember,callback:function(e){t.groupMember=e},expression:"groupMember"}}),t.groupMember.length>2?a("datalist",{attrs:{id:"users"}},t._l(t.users,(function(e){return a("option",{key:e.id},[t._v(t._s(e.login))])})),0):t._e(),a("b-button",{staticClass:"btnGreen",attrs:{size:"sm"},on:{click:t.addMember}},[t._v(" "+t._s(t.buttonText)+" ")])],1)],1):t._e(),!1===t.isEdit?a("b-row",{staticClass:"container"},t._l(t.groupMembers,(function(e){return a("UserItemList",{key:e.idUser,attrs:{userDataProp:e},on:{remove:t.removeMember}})})),1):t._e(),a("b-form-text",[t._v("Pola oznaczone * są obowiązkowe")]),a("b-button",{staticClass:"mt-3 mx-auto shadow font-weight-bold btnGreen",attrs:{type:"submit",id:"d"}},[t._v(" "+t._s(t.buttonText)+" ")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},wt=[],Ct=(a("a4d3"),a("e01a"),a("7db0"),a("c740"),a("a434"),a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userItemWrapper m-1 rounded"},[a("b-badge",{staticClass:"greenBadge"},[t._v(" "+t._s(this.userData.name)+" "),a("b-icon-x",{on:{click:function(e){return t.$emit("remove",t.userData.idUser)}}})],1)],1)}),kt=[],It={name:"UserListItem",props:{userDataProp:{type:Object,required:!0}},data:function(){return{groupData:null}},created:function(){this.userData=this.userDataProp}},_t=It,Mt=(a("729a"),Object(x["a"])(_t,Ct,kt,!1,null,null,null)),Pt=Mt.exports,Ot={name:"GroupForm",components:{UserItemList:Pt},props:{isEdit:{type:Boolean,required:!0},editedGroupId:{type:String}},data:function(){return{groupName:"",groupDescription:"",groupLogo:"",groupMember:"",buttonText:this.isEdit?"Zapisz":"Dodaj",formTitle:this.isEdit?"Edycja Grupy":"Dodawanie Grupy",groupMembers:[],validationRequiredStates:{groupName:null},validationNotRequiredStates:{groupDescription:null,groupMember:null,logo:null},validationMessages:{}}},created:function(){var t=this;this.isEdit?(this.loading=!0,this.axios.get("/group/edit/info/".concat(this.editedGroupId)).then((function(e){if(e.data.data){var a=e.data.data;t.groupName=a.name?a.name:"",t.groupDescription=a.description?a.description:""}else t.showMessage("Coś poszło nie tak","Dodawanie grupy","/groups");t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/groups");t.fetchErr(e),t.loading=!1}))):(this.loading=!0,this.axios.get("/user/list").then((function(e){e.data&&(t.users=e.data.data),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/groups");t.fetchErr(e),t.loading=!1})))},methods:{removeMember:function(t){this.groupMembers.splice(this.groupMembers.findIndex((function(e){return e.idUser!==t})),1)},addMember:function(){var t=this,e=this.groupMembers.map((function(t){return t.name}));this.validationNotRequiredStates.groupMember=!0,this.groupMember===this.$store.getters.login?(this.validationNotRequiredStates.groupMember=!1,this.validationMessages.groupMember="Nie możesz dodać samego siebie."):-1!==e.indexOf(this.groupMember)?(this.validationNotRequiredStates.groupMember=!1,this.validationMessages.groupMember="Dodałeś już tego użytkownika."):this.axios.get("/user/checkLogin?login=".concat(this.groupMember)).then((function(e){!0===e.data.message&&"active"===e.data.data.status?(t.validationNotRequiredStates.groupMember=!0,t.groupMembers.push({idUser:e.data.data.id,name:t.groupMember}),t.groupMember=""):(t.validationNotRequiredStates.groupMember=!1,t.validationMessages.groupMember="Nie ma takiego użytkownika.")}))},uploadLogo:function(t){var e=[t.target.files[0]];this.groupLogo=e[0],this.validationMessages.logo="",this.validationNotRequiredStates.logo=!0;var a=["JPG","PNG"],i=this.groupLogo.name.split(".").pop().toUpperCase(),s=a.find((function(t){return t===i}));void 0===s&&(this.validationNotRequiredStates.logo=!1,this.validationMessages.logo+="Tylko jpg i png"),this.groupLogo.size>1024e3&&(this.validationNotRequiredStates.logo=!1,this.validationMessages.logo+="Maksymalny rozmiar logoa to 1 mb.")},validationName:function(){this.validationRequiredStates.groupName=!0,this.validationMessages.groupName="",/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]{3,40}$/.test(this.groupName)||(this.validationRequiredStates.groupName=!1,(this.groupName.length<3||this.groupName.length>40)&&(this.validationMessages.groupName+="Długość od 3 do 40 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]*$/.test(this.groupName)||(this.validationMessages.groupName+="Dozwolone litery i cyfry oraz spację "))},validationDescription:function(){this.validationNotRequiredStates.groupDescription=!0,this.validationMessages.groupDescription="",this.groupDescription.length?/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]{1,100}$/.test(this.groupDescription)||(this.validationNotRequiredStates.groupDescription=!1,this.groupDescription.length>100&&(this.validationMessages.groupDescription+="Maksymalna długość to 100 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]+$/.test(this.groupDescription)||(this.validationMessages.groupDescription+="Dozwolone litery, cyfry oraz spację, enter oraz ( - , ( ) ! ? )")):this.validationNotRequiredStates.groupDescription=null},validationAll:function(){this.validationDescription(),this.validationName()},addGroup:function(){var t=this;if(this.validationAll(),this.validationRequiredStates.groupName){var e=new FormData;e.append("name",this.groupName),this.validationNotRequiredStates.groupDescription&&e.append("description",this.groupDescription),this.groupLogo&&e.append("logo",this.groupLogo),this.isEdit?(e.append("groupId",this.editedGroupId),this.loading=!0,this.axios({method:"post",url:"/group/edit/info",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.showMessage("Grupa została zaktualizowana","Edycja grupy","/group/details/".concat(t.editedGroupId)),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))):(this.groupMembers.length&&e.append("members",JSON.stringify(this.groupMembers)),this.loading=!0,this.axios({method:"post",url:"/group/add",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.showMessage("Grupa została dodana","Dodawanie grupy","/groups"),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1})))}}}},zt=Ot,St=(a("5792"),Object(x["a"])(zt,Dt,wt,!1,null,"1df68d96",null)),Tt=St.exports,jt={name:"EditGroup",components:{GroupForm:Tt},props:["groupId"]},Nt=jt,$t=Object(x["a"])(Nt,yt,xt,!1,null,"0e89cd0d",null),Et=$t.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-10  col-md-9 col-lg-7 col-xl-4 py-3",attrs:{id:"editGroupMembersWrapper"}},[a("h2",{staticClass:"mb-3"},[t._v(" Edycja Członków Grupy ")]),a("div",{staticClass:"d-inline-block justify-content-center col-12 col-sm-10  col-md-9 col-lg-8 col-xl-7"},t._l(t.groupMembersToPrint,(function(e){return a("EditMembersListItem",{key:e.id,attrs:{"member-info":e},on:{changePermission:t.changePermission,restore:t.restoreMember,remove:t.removeMember}})})),1),a("b-form-group",{staticClass:"d-flex mt-3 justify-content-center",attrs:{"invalid-feedback":t.validationNewMember.message,label:"Dodawanie Użytkowników",state:t.validationNewMember.state}},[a("b-input-group-append",[a("b-form-input",{staticClass:"mr-1",attrs:{size:"sm",list:"users",placeholder:"Dodawanie Użytkowników",state:t.validationNewMember.state},model:{value:t.newMember,callback:function(e){t.newMember=e},expression:"newMember"}}),t.newMember.length>2?a("datalist",{attrs:{id:"users"}},t._l(t.users,(function(e){return a("option",{key:e.id},[t._v(t._s(e.login))])})),0):t._e(),a("b-button",{staticClass:"btnGreen",attrs:{size:"sm"},on:{click:t.addNewMember}},[t._v(" Dodaj ")])],1)],1),a("b-row",{staticClass:"container"},t._l(t.newMembers,(function(e){return a("UserListItem",{key:e.idUser,attrs:{userDataProp:e},on:{remove:t.removeNewMember}})})),1),a("b-button",{staticClass:"btnGreen",on:{click:t.save}},[t._v(" OK ")]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Rt=[],Yt=a("5530"),At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-badge",{staticClass:"memberItemWrapper greenBadge rounded col-12 px-1 my-1"},[a("b-row",{staticClass:"align-items-center"},[a("b-col",{staticClass:"m-0"},[a("div",{staticClass:"d-flex justify-content-start align-items-center"},[a("b-avatar",{staticClass:"mr-1 bv-d-sm-down-none",attrs:{variant:"light",src:t.avatarLink}}),a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.memberInfo.idUser.login)+" ")])],1)]),a("b-col",{staticClass:"col-3 m-0"},[a("b-form-select",{directives:[{name:"show",rawName:"v-show",value:t.showSelect,expression:"showSelect"}],attrs:{size:"sm",options:t.memberOptions},on:{change:function(e){return t.$emit("changePermission",t.memberInfo.idUser.id,t.selectedPermission)}},model:{value:t.selectedPermission,callback:function(e){t.selectedPermission=e},expression:"selectedPermission"}}),a("b-button",{directives:[{name:"show",rawName:"v-show",value:"deleted"===t.memberInfo.permission,expression:"memberInfo.permission === 'deleted'"}],staticClass:"bg-light text-black-50",attrs:{size:"sm"},on:{click:t.restore}},[t._v(" Przywróć ")])],1),a("b-col",{staticClass:"col-2 m-0",on:{click:function(e){return t.$emit("remove",t.memberInfo.idUser.id)}}},[a("b-icon-x",{staticClass:"text-white",attrs:{"font-scale":"2"}})],1)],1)],1)},Ft=[],qt={name:"EditMembersListItem",props:{memberInfo:{type:Object,required:!0}},data:function(){return{avatarLink:"",memberOptions:[{value:"member",text:"członek"},{value:"admin",text:"administrator"}],selectedPermission:this.memberInfo.permission}},computed:{showSelect:function(){return"pending"!==this.memberInfo.permission&&"deleted"!==this.memberInfo.permission}},methods:{restore:function(){this.$emit("restore",this.memberInfo.idUser.id),this.selectedPermission=this.memberInfo.permission}},mounted:function(){this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.memberInfo.idUser.id)}},Lt=qt,Ut=(a("167e"),Object(x["a"])(Lt,At,Ft,!1,null,"6db05134",null)),Vt=Ut.exports,Wt={name:"EditGroupMembers",props:["groupId"],components:{EditMembersListItem:Vt,UserListItem:Pt},data:function(){return{newMembers:[],userId:"",newMember:"",modificatedMemberPermissions:[],users:[],groupMembers:[],groupMembersToPrint:[],userPermission:"",validationNewMember:{state:null,message:""}}},methods:{removeNewMember:function(t){this.newMembers.splice(this.newMembers.findIndex((function(e){return e.idUser===t})),1)},removeMember:function(t){var e=this.modificatedMemberPermissions.find((function(e){return e.idUser===t}));e?e.permission="deleted":this.modificatedMemberPermissions.push({idUser:t,permission:"deleted"}),e=this.groupMembersToPrint.find((function(e){return e.idUser.id===t})),e.permission="deleted"},restoreMember:function(t){var e=this.modificatedMemberPermissions.map((function(t){return t.idUser})).indexOf(t),a=this.groupMembers.find((function(e){return e.idUser.id===t}));-1!==e?this.modificatedMemberPermissions.splice(e,1):this.modificatedMemberPermissions.push({idUser:t,permission:"member"});var i="member";a&&(i="deleted"===a.permission?i:a.permission);var s=this.groupMembersToPrint.find((function(e){return e.idUser.id===t}));s.permission=i},changePermission:function(t,e){var a=this.modificatedMemberPermissions.find((function(e){return e.idUser===t}));a?a.permission=e:this.modificatedMemberPermissions.push({idUser:t,permission:e})},addNewMember:function(){var t=this,e=this.newMembers.map((function(t){return t.name})),a=this.groupMembers.map((function(t){return t.idUser.login}));this.validationNewMember.state=!0,this.newMember===this.$store.getters.login?(this.validationNewMember.state=!1,this.validationNewMember.message="Nie możesz dodać samego siebie."):-1!==e.indexOf(this.newMember)||-1!==a.indexOf(this.newMember)?(this.validationNewMember.state=!1,this.validationNewMember.message="Dodałeś już tego użytkownika."):this.axios.get("/user/checkLogin?login=".concat(this.newMember)).then((function(e){!0===e.data.message&&"active"===e.data.data.status?(t.validationNewMember.state=!0,t.newMembers.push({idUser:e.data.data.id,name:t.newMember}),t.newMember=""):(t.validationNewMember.state=!1,t.validationNewMember.message="Nie ma takiego użytkownika.")}))},save:function(){var t=this,e=new FormData;this.newMembers&&e.append("newMembers",JSON.stringify(this.newMembers)),this.modificatedMemberPermissions&&e.append("modificatedMemberPermissions",JSON.stringify(this.modificatedMemberPermissions)),e.append("groupId",this.groupId),this.loading=!0,this.axios.post("/group/edit/members",e).then((function(){t.showMessage("Grupa została zaktualizowana","Edycja grupy","/group/details/".concat(t.groupId)),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},created:function(){var t=this;this.userId=this.$store.getters.userId,this.loading=!0,this.axios.get("/group/edit/members/".concat(this.groupId)).then((function(e){if(e.data){t.groupMembers=e.data.data.members,t.users=e.data.data.users;var a=t.groupMembers.map((function(t){return Object(Yt["a"])({},t)}));t.groupMembersToPrint=a.filter((function(e){return"owner"!==e.permission&&e.idUser.id!==t.userId})),t.userPermission=e.data.permission}else t.showMessage("Coś poszło nie tak","Edycja Członków grupy","/groups");t.loading=!1})).catch((function(e){if(t.loading=!1,405===e.response.status)return t.$router.push("/groups");t.fetchErr(e)}))}},Zt=Wt,Bt=(a("c78a"),Object(x["a"])(Zt,Gt,Rt,!1,null,"8e440f2c",null)),Ht=Bt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto mb-3 col-11 col-sm-8  col-md-7 col-lg-5 col-xl-4 p-3",attrs:{id:"addGroupDiscardWrapper"}},[a("h2",[t._v("Tworzenie zrzutki")]),0===t.step?a("StepOneInfo",{on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),1===t.step?a("StepTwoType",{on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.step?a("StepThreeAddMembers",{attrs:{members:t.groupMembers},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),3===t.step?a("StepFourSpreadingAmount",{on:{end:t.addDiscard,prevStep:t.prevStep}}):t._e(),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Kt=[],Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepOneInfoWrapper text-white"},[a("h4",{staticClass:"mt-3"},[t._v("Informacje")]),a("div",{staticClass:"mx-auto col-12 col-md-8 col-lg-6"},[a("b-form-group",{attrs:{"invalid-feedback":t.validationMessages.name,state:t.validationRequiredStates.name,label:"Nazwa*"}},[a("b-form-input",{staticClass:"my-2",attrs:{state:t.validationRequiredStates.name,placeholder:"Nazwa",size:"sm"},on:{input:t.validationName},model:{value:t.addDiscardName,callback:function(e){t.addDiscardName=e},expression:"addDiscardName"}})],1),a("b-form-group",{attrs:{label:"Wybierz datę płatności z listy*"}},[a("b-select",{attrs:{options:t.dateOptions,size:"sm"},on:{input:t.validationDate},model:{value:t.addDiscardDateOfPayment,callback:function(e){t.addDiscardDateOfPayment=e},expression:"addDiscardDateOfPayment"}})],1),a("b-form-group",{staticClass:"mt-2",attrs:{label:"lub podaj własną","invalid-feedback":t.validationMessages.date,state:t.validationRequiredStates.date}},[a("b-form-datepicker",{staticClass:"text-left",attrs:{placeholder:"Termin płatności",state:t.validationRequiredStates.date,"date-format-options":t.datePickerFormat,size:"sm"},on:{input:t.validationDate},model:{value:t.addDiscardDateOfPayment,callback:function(e){t.addDiscardDateOfPayment=e},expression:"addDiscardDateOfPayment"}})],1),a("b-form-group",{attrs:{"invalid-feedback":t.validationMessages.description,state:t.validationDescriptionState,label:"Opis",description:"Można też tu umieścić opis sposobu platności"}},[a("b-form-textarea",{staticClass:"my-2",attrs:{state:t.validationDescriptionState,placeholder:"Opis"},on:{input:t.validationDescription},model:{value:t.addDiscardDescription,callback:function(e){t.addDiscardDescription=e},expression:"addDiscardDescription"}})],1),a("b-form-text",{staticClass:"my-2"},[t._v("Pola oznaczone * są obowiązkowe")]),a("b-button",{staticClass:"btnGreen",on:{click:t.nextStep}},[t._v("Dalej")])],1)])},Xt=[],te=(a("07ac"),{name:"StepOneInfo",data:function(){return{dateOptions:[],validationRequiredStates:{date:null,name:null},validationDescriptionState:null,validationMessages:{date:"",description:"",name:""},datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"}}},computed:{addDiscardName:{get:function(){return this.$store.getters.addDiscardName?this.$store.getters.addDiscardName:""},set:function(t){this.$store.commit("addDiscardName",t)}},addDiscardDateOfPayment:{get:function(){return this.$store.getters.addDiscardDateOfPayment?this.$store.getters.addDiscardDateOfPayment:""},set:function(t){this.$store.commit("addDiscardDateOfPayment",t)}},addDiscardDescription:{get:function(){return this.$store.getters.addDiscardDescription?this.$store.getters.addDiscardDescription:""},set:function(t){this.$store.commit("addDiscardDescription",t)}}},methods:{validationName:function(){this.validationRequiredStates.name=!0,this.validationMessages.name="",/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]{3,40}$/.test(this.addDiscardName)||(this.validationRequiredStates.name=!1,(this.addDiscardName.length<3||this.addDiscardName.length>40)&&(this.validationMessages.name+="Długość od 3 do 40 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]*$/.test(this.addDiscardName)||(this.validationMessages.name+="Dozwolone litery i cyfry oraz spację "))},validationDescription:function(){this.validationDescriptionState=!0,this.validationMessages.description="",this.addDiscardDescription?/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]{1,150}$/.test(this.addDiscardDescription)||(this.validationDescriptionState=!1,this.addDiscardDescription.length>150&&(this.validationMessages.description+="Maksymalna długość to 150 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]+$/.test(this.addDiscardDescription)||(this.validationMessages.description+="Dozwolone litery, cyfry oraz spację, enter oraz ( - , ( ) ! ? )")):this.validationDescriptionState=null},validationDate:function(){if(this.validationRequiredStates.date=!0,this.validationMessages.date="",this.addDiscardDateOfPayment){var t=this.$dayjs(this.$dayjs().format("YYYY-MM-DD")),e=this.$dayjs(this.addDiscardDateOfPayment),a=Math.abs(e.diff(t,"days"));t>e?(this.validationRequiredStates.date=!1,this.validationMessages.date="Nie może być mniejszy od aktualnej daty."):a>365&&(this.validationRequiredStates.date=!1,this.validationMessages.date="Nie może być większy niż rok.")}else this.validationRequiredStates.date=!1,this.validationMessages.date="To pole nie może by puste."},validationAll:function(){this.validationDescription(),this.validationDate(),this.validationName()},nextStep:function(){this.validationAll();var t=Object.values(this.validationRequiredStates).find((function(t){return!1===t}));void 0===t&&this.$emit("nextStep")}},created:function(){var t=this.$dayjs();this.dateOptions=[{text:"Wybierz",value:""},{text:"Za tydzień",value:t.add(1,"week").format("YYYY-MM-DD")},{text:"Za dwa tygodnie",value:t.add(2,"week").format("YYYY-MM-DD")},{text:"Za miesiąc",value:t.add(1,"month").format("YYYY-MM-DD")},{text:"Za dwa miesiące",value:t.add(2,"month").format("YYYY-MM-DD")},{text:"Za pół roku",value:t.add(6,"month").format("YYYY-MM-DD")},{text:"Za rok",value:t.add(1,"year").format("YYYY-MM-DD")}]}}),ee=te,ae=Object(x["a"])(ee,Qt,Xt,!1,null,"786e5c77",null),ie=ae.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepTwoTypeWrapper text-white d-inline-block"},[a("h4",{staticClass:"mt-3"},[t._v("Typ Zrzutki")]),a("b-radio-group",{staticClass:"text-justify my-4",attrs:{options:t.typeOptions},model:{value:t.addDiscardType,callback:function(e){t.addDiscardType=e},expression:"addDiscardType"}}),"cyclical"===t.addDiscardType?a("div",{staticClass:"mx-auto"},[a("b-form-group",{attrs:{label:"Odnawiaj co",state:t.validationIntervalState,"invalid-feedback":t.validationIntervalMessage}},[a("b-form-select",{attrs:{options:t.cyclicalIntervalOptions,state:t.validationIntervalState,size:"sm"},on:{change:t.validateInterval},model:{value:t.addDiscardCyclicalInterval,callback:function(e){t.addDiscardCyclicalInterval=e},expression:"addDiscardCyclicalInterval"}})],1)],1):t._e(),a("b-button",{staticClass:"btnGreen mr-1",on:{click:t.nextStep}},[t._v("Dalej")]),a("b-button",{staticClass:"btnGreen ml-1",on:{click:function(e){return t.$emit("prevStep")}}},[t._v("Wstecz")])],1)},oe=[],ne={name:"StepTwoType",data:function(){return{validationIntervalState:null,validationIntervalMessage:"",typeOptions:[{value:"cyclical",text:"Cykliczna"},{value:"oneTime",text:"Jednorazowa"}],cyclicalIntervalOptions:[{value:null,text:"Wybierz opcję"},{value:"oneWeek",text:"Tydzień"},{value:"twoWeeks",text:"Dwa tygodnie"},{value:"month",text:"Miesiąc"},{value:"twoMonths",text:"Dwa miesiące"},{value:"halfYear",text:"Pół roku"},{value:"year",text:"Rok"}]}},computed:{addDiscardType:{get:function(){return this.$store.getters.addDiscardType?this.$store.getters.addDiscardType:""},set:function(t){this.$store.commit("addDiscardType",t)}},addDiscardCyclicalInterval:{get:function(){return this.$store.getters.addDiscardCyclicalInterval},set:function(t){this.$store.commit("addDiscardCyclicalInterval",t)}}},methods:{validateInterval:function(){this.validationIntervalState=!0,this.validationIntervalMessage="","cyclical"!==this.addDiscardType||this.addDiscardCyclicalInterval?this.validationIntervalState=null:(this.validationIntervalState=!1,this.validationIntervalMessage="Wybierz jedną z opcji.")},nextStep:function(){this.validateInterval(),!1!==this.validationIntervalState&&this.$emit("nextStep")}}},re=ne,le=(a("0523"),Object(x["a"])(re,se,oe,!1,null,"1e2742c2",null)),de=le.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepThreeAddMembersWrapper text-white"},[a("h4",{staticClass:"mt-3"},[t._v("Dodawanie użytkowników")]),a("div",{staticClass:"col-10 col-sm-6 col-xl-5 mx-auto my-4"},[a("b-form-group",{staticClass:"text-justify",attrs:{"label-align":"center",label:"Wybierz użytkowników"}},[a("b-form-checkbox-group",{attrs:{"value-field":"id","text-field":"login",options:t.membersOptions},on:{input:t.validateMembers},model:{value:t.addDiscardMembers,callback:function(e){t.addDiscardMembers=e},expression:"addDiscardMembers"}}),a("b-form-checkbox",{staticClass:"greenText",attrs:{value:"true","unchecked-value":"false"},on:{change:function(e){return t.selectAll(e)}}},[t._v(" wszyscy ")])],1),a("b-form-invalid-feedback",{attrs:{state:t.validationMembersState}},[t._v(" Wybierz co najmniej jednego ")])],1),a("b-button",{staticClass:"btnGreen mr-1",on:{click:t.nextStep}},[t._v("Dalej")]),a("b-button",{staticClass:"btnGreen ml-1",on:{click:function(e){return t.$emit("prevStep")}}},[t._v("Wstecz")])],1)},ue=[],me={name:"StepThreeAddMembers",props:{members:{type:Array,required:!0}},data:function(){return{membersOptions:[],validationMembersState:null}},computed:{addDiscardMembers:{get:function(){return this.$store.getters.addDiscardMembers},set:function(t){this.$store.commit("addDiscardMembers",t)}}},methods:{nextStep:function(){this.validateMembers(),this.validationMembersState&&this.$emit("nextStep")},selectAll:function(t){this.addDiscardMembers="true"===t?this.members:[]},validateMembers:function(){this.validationMembersState=0!==this.addDiscardMembers.length}},created:function(){this.membersOptions=this.members.map((function(t){return{id:t,login:t.login}})),this.addDiscardMembers&&(this.addDiscardMembers=this.addDiscardMembers.map((function(t){return{id:t.id,login:t.login}})))}},pe=me,fe=Object(x["a"])(pe,ce,ue,!1,null,"d3705880",null),ge=fe.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepFourSpreadingAmoun text-white"},[a("h4",{staticClass:"mt-3"},[t._v("Przydział składek")]),a("div",{staticClass:"col-12 col-md-10 col-lg-9 col-xl-8 mx-auto my-3"},[a("b-form-group",{staticClass:"col-9 mx-auto"},[a("b-form-select",{attrs:{options:t.typesOfSpread,size:"sm"},on:{change:t.clearData},model:{value:t.spreadType,callback:function(e){t.spreadType=e},expression:"spreadType"}})],1),"spreading"===t.spreadType?a("div",{staticClass:"mx-auto"},[a("b-form-group",{staticClass:"col-9 mx-auto px-auto",attrs:{label:"Kwota","invalid-feedback":t.validationMessage,state:t.validationState}},[a("PriceInput",{key:"spreadingInput",staticClass:"col-12 mx-auto px-auto",attrs:{"validate-status-prop":t.validationState},on:{input:function(e){t.calculateSingleAmount(),t.validate()}},model:{value:t.totalAmount,callback:function(e){t.totalAmount=e},expression:"totalAmount"}})],1),a("p",[t._v(" Każdy użytkownik będzie musiał zapłacić "),a("b-badge",{staticClass:"greenBadge"},[t._v(" "+t._s(t.amountInfo)+" ")])],1)],1):"specified"===t.spreadType?a("div",{staticClass:"mx-auto"},[a("b-form-group",{staticClass:"col-9 mx-auto",attrs:{label:"Kwota","invalid-feedback":t.validationMessage,state:t.validationState}},[a("PriceInput",{key:"specifiedInput",staticClass:"mx-auto",attrs:{"validate-status-prop":t.validationState},on:{input:function(e){t.calculateTotalAmount(),t.validate()}},model:{value:t.singleAmount,callback:function(e){t.singleAmount=e},expression:"singleAmount"}})],1),a("p",[t._v(" Suma: "),a("b-badge",{staticClass:"greenBadge"},[t._v(" "+t._s(t.amountInfo)+" ")])],1)],1):a("div",[a("div",{staticClass:"d-inline-block col-12 justify-content-center"},t._l(t.addDiscardMembers,(function(e){return a("ManualAmountMemberItem",{key:e.id,attrs:{"member-amount-element":e},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})})),1),a("b-form-invalid-feedback",{attrs:{state:t.validationState}},[t._v(" "+t._s(t.validationMessage)+" ")]),a("p",[t._v(" Suma: "),a("b-badge",{staticClass:"greenBadge"},[t._v(" "+t._s(t.amountInfo)+" ")])],1)],1)],1),a("b-button",{staticClass:"btnGreen",on:{click:t.nextStep}},[t._v("Zakończ")]),a("b-button",{staticClass:"btnGreen ml-1",on:{click:function(e){return t.$emit("prevStep")}}},[t._v("Wstecz")])],1)},ve=[],be=(a("13d5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-badge",{staticClass:"greenBadge mt-2 col-12"},[a("b-row",{staticClass:"align-items-center"},[a("b-col",[a("div",{staticClass:"d-flex justify-content-start align-items-center"},[a("b-avatar",{staticClass:"mr-2 bv-d-md-down-none",attrs:{variant:"light",src:t.avatarLink}}),a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.memberAmountElement.login)+" ")])],1)]),a("b-col",[a("PriceInput",{key:t.memberAmountElement.id,attrs:{"validate-status-prop":t.memberAmountElement.status},on:{input:function(e){return t.$emit("input",e)}}})],1)],1)],1)}),ye=[],xe={name:"ManualAmountMemberItem",components:{PriceInput:it},props:{memberAmountElement:{type:Object,required:!0}},data:function(){return{avatarLink:"",validationAmountState:null}},mounted:function(){this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.memberAmountElement.id)}},De=xe,we=(a("fa44"),Object(x["a"])(De,be,ye,!1,null,"7cd2bd7b",null)),Ce=we.exports,ke={name:"StepFourSpreadingAmount",components:{ManualAmountMemberItem:Ce,PriceInput:it},data:function(){return{spreadType:"spreading",amountInput:0,totalAmount:0,singleAmount:0,validationMessage:"",validationState:null,typesOfSpread:[{value:"spreading",text:"Rozłożenie kwoty"},{value:"specified",text:"Określona składka"},{value:"manual",text:"Ręczne"}]}},computed:{amountInfo:function(){switch(this.spreadType){case"spreading":return this.singleAmount;case"specified":return this.totalAmount;default:return this.calculateTotalAmountForManual(),this.totalAmount}},addDiscardMembers:{get:function(){return this.$store.getters.addDiscardMembers},set:function(t){this.$store.commit("addDiscardMembers",t)}}},methods:{validate:function(){if(this.validationMessage="",this.validationState=!0,"manual"===this.spreadType){this.addDiscardMembers.forEach((function(t){return t.status=!0}));var t=this.addDiscardMembers.filter((function(t){return t.amount<1}));t.length&&(t.forEach((function(t){return t.status=!1})),this.validationMessage="Składka na jednego użytkownika nie może być mniejsza od 1",this.validationState=!1)}else this.singleAmount<1&&(this.validationMessage="Składka na jednego użytkownika nie może być mniejsza od 1",this.validationState=!1)},calculateTotalAmount:function(){this.totalAmount=(this.singleAmount*this.addDiscardMembers.length).toFixed(2)},calculateSingleAmount:function(){this.singleAmount=(this.totalAmount/this.addDiscardMembers.length).toFixed(2)},calculateTotalAmountForManual:function(){this.totalAmount=this.addDiscardMembers.reduce((function(t,e){return t+Number(e.amount)}),0)},clearData:function(){this.addDiscardMembers.forEach((function(t){t.status=null,t.amount="0"})),this.totalAmount="0",this.singleAmount="0",this.validationState=null},addAmountsToUsers:function(){var t=this;"manual"===this.spreadType?this.addDiscardMembers=this.addDiscardMembers.map((function(t){return{id:t.id,amount:t.amount}})):this.addDiscardMembers=this.addDiscardMembers.map((function(e){return{id:e.id,amount:t.singleAmount}}))},nextStep:function(){this.validate(),this.validationState&&(this.addAmountsToUsers(),this.$emit("end"))}},created:function(){this.addDiscardMembers=this.addDiscardMembers.map((function(t){return{id:t.id,login:t.login,amount:"0",status:null}}))}},Ie=ke,_e=Object(x["a"])(Ie,he,ve,!1,null,"576ca5fc",null),Me=_e.exports,Pe={name:"AddGroupDiscard",props:["groupId"],components:{StepOneInfo:ie,StepTwoType:de,StepThreeAddMembers:ge,StepFourSpreadingAmount:Me},data:function(){return{step:0,groupMembers:[]}},methods:{nextStep:function(){this.step<3&&(this.step+=1)},prevStep:function(){this.step>0&&(this.step-=1)},addDiscard:function(){var t=this,e=new FormData;this.loading=!0,e.append("name",this.$store.getters.addDiscardName),e.append("date",this.$store.getters.addDiscardDateOfPayment),e.append("isCyclic","cyclical"===this.$store.getters.addDiscardType),e.append("groupId",this.groupId),e.append("spreadType",this.$store.getters.addDiscardSpreadType),e.append("members",JSON.stringify(this.$store.getters.addDiscardMembers)),"cyclical"===this.$store.getters.addDiscardType&&e.append("cyclicalInterval",this.$store.getters.addDiscardCyclicalInterval),this.$store.getters.addDiscardDescription&&e.append("description",this.$store.getters.addDiscardDescription),this.axios.post("/discard/group/add",e).then((function(){t.showMessage("Zrzutka została dodana","Tworzenie zrzutki","/group/details/".concat(t.groupId)),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},created:function(){var t=this;this.userId=this.$store.getters.userId,this.loading=!0,this.axios.get("/discard/group/add/".concat(this.groupId)).then((function(e){e.data.members?t.groupMembers=e.data.members:t.showMessage("Coś poszło nie tak","Tworzenie zrzutki","/groups"),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/groups");t.fetchErr(e),t.loading=!1}))}},Oe=Pe,ze=(a("8bcd"),Object(x["a"])(Oe,Jt,Kt,!1,null,"0ff246b3",null)),Se=ze.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-8  col-md-7 col-lg-5 col-xl-4 p-3 text-white",attrs:{id:"paymentWrapper"}},[a("h2",{staticClass:"greenText"},[t._v("Płatność")]),a("h3",{staticClass:"mt-4"},[t._v(" "+t._s(t.discardInfo.idDiscard.name)+" ")]),a("div",{staticClass:"my-4"},[t.discardInfo.idDiscard.description?a("div",[t._v(" "+t._s(t.discardInfo.idDiscard.description)+" ")]):a("div",[t._v(" Brak Opisu ")])]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" Do zaplaty ")]),a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.obligation.amount)+" ")])]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" Wpłacono ")]),a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.obligation.paidIn)+" ")])]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" Pozostało ")]),a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.amountLeft)+" ")])]),a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Ile chcesz wpłacić","invalid-feedback":t.validationMessage,state:t.validationState}},[a("PriceInput",{key:"specifiedInput",staticClass:"mx-auto",attrs:{"validate-status-prop":t.validationState},on:{input:t.validationAmount},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),a("div",[a("b-button",{staticClass:"btnGreen mr-1",on:{click:t.addPayment}},[t._v("Ok")])],1)],1)},je=[],Ne={name:"Payment",props:["discardId","type"],components:{PriceInput:it},data:function(){return{discardInfo:{idDiscard:{}},obligation:{},validationState:null,validationMessage:"",amount:0,amountLeft:0}},methods:{validationAmount:function(){this.validationState=!0,this.validationMessage="",console.log(this.amount,this.obligation.amount),this.amount>this.amountLeft&&(this.validationState=!1,this.validationMessage="Nie może być większe od należności.")},addPayment:function(){var t=this;if(this.validationAmount(),this.validationState){var e=new FormData;e.append("amount",this.amount),e.append("discardCycleId",this.discardId),this.axios({method:"post",url:"/discard/".concat(this.type,"/payment/create/"),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){var e="group"===t.type?"/discard/details/0/".concat(t.discardId):"/discard/single/details/".concat(t.discardId);t.showMessage("Dodano","Tworzenie płatności",e)})).catch((function(e){t.fetchErr(e)}))}}},created:function(){var t=this;this.axios.get("discard/".concat(this.type,"/payment/create/").concat(this.discardId)).then((function(e){if(e.data.data)return t.discardInfo=e.data.data.discard,t.obligation=e.data.data.obligation,t.amountLeft=Number((t.obligation.amount-t.obligation.paidIn).toFixed(2)),void(t.amount=t.amountLeft>0?t.amountLeft:t.obligation.amount);t.showMessage("Coś poszło nie tak","Tworzenie płatności","/home")})).catch((function(e){if(405===e.response.status)return t.$router.push("groups");t.fetchErr(e)}))}},$e=Ne,Ee=(a("bc42"),Object(x["a"])($e,Te,je,!1,null,"5671bef4",null)),Ge=Ee.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 p-3",attrs:{id:"groupDiscardEditObligationWrapper"}},[a("h2",{staticClass:"my-3"},[t._v("Edycja Należności")]),a("h3",{staticClass:"my-3"},[t._v(t._s(t.name))]),a("b-form-group",{staticClass:"col-10 col-sm-7 col-md-5 col-xl-4 mx-auto"},[a("b-form-select",{attrs:{options:t.typesOfSpread,size:"sm"},on:{change:t.calculateAmountInput},model:{value:t.spreadType,callback:function(e){t.spreadType=e},expression:"spreadType"}})],1),"manual"!==t.spreadType?a("b-form-group",{staticClass:"col-10 col-sm-7 col-md-5 col-xl-4 mx-auto",attrs:{label:"Kwota"}},[a("PriceInput",{key:"specifiedInput",attrs:{"validate-status-prop":t.validationState},on:{input:t.calculateAmount},model:{value:t.amountInput,callback:function(e){t.amountInput=e},expression:"amountInput"}})],1):t._e(),a("div",{staticClass:"col-12 mx-auto"},[a("div",{staticClass:"row justify-content-between align-items-center py-2 my-2"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v(" Należność ")]),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v(" Wpłata ")]),a("div",[a("b-icon-x",{staticClass:"invisible",attrs:{"font-scale":"2"}})],1)]),t._l(t.obligations,(function(e){return a("DiscardObligationItem",{key:e.userId,attrs:{"obligation-data":e,"is-edit":!0,"edit-amount":t.manualEditAmount},on:{remove:t.removeMember}})}))],2),a("p",[t._v(" Suma: "),a("b-badge",{staticClass:"greenBadge"},[t._v(" "+t._s(t.amountInfo)+" ")])],1),a("div",[t.notObligatedUsers.length?a("div",{staticClass:"mx-auto col-11 col-xs-7 col-md-8 col-lg-7 col-xl-6"},[a("b-form-select",{staticClass:"my-3",attrs:{options:t.notObligatedUsers,"text-field":"login","value-field":"id",multiple:"","select-size":4},model:{value:t.membersToAdd,callback:function(e){t.membersToAdd=e},expression:"membersToAdd"}}),a("b-button",{staticClass:"btnGreen",on:{click:t.addMembers}},[t._v(" Dodaj ")])],1):t._e()]),a("b-form-invalid-feedback",{staticClass:"my-3",attrs:{state:t.validationState}},[t._v(" "+t._s(t.validationMessage)+" ")]),a("b-button",{staticClass:"btnGreen my-3",on:{click:t.saveChanges}},[t._v(" Zapisz ")]),a("b-button",{staticClass:"btnGreen ml-1",on:{click:t.loadData}},[t._v(" Wyczyść Pola ")]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Ye=[],Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"discardObligationItem row justify-content-between align-items-center\n   greenBadge rounded py-2 my-2"},[a("div",{staticClass:"col-4 d-flex justify-content-start align-items-center"},[a("b-avatar",{staticClass:"mr-1 bv-d-md-down-none",attrs:{variant:"light",src:t.avatarLink}}),t.isEdit?a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.obligationData.login)+" ")]):a("div",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.obligationData.idUser.login)+" ")])],1),a("div",{staticClass:"col-3"},[t.isEdit?a("div",[t.editAmount?a("PriceInput",{attrs:{"validate-status-prop":t.obligationData.validateAmountState},model:{value:t.obligationData.amount,callback:function(e){t.$set(t.obligationData,"amount",e)},expression:"obligationData.amount"}}):a("div",[t._v(t._s(t.obligationData.amount))])],1):a("div",[t._v(" "+t._s(t.obligationData.amount)+" ")])]),a("div",{staticClass:"col-3"},[t.isEdit?a("div",[a("PriceInput",{attrs:{"validate-status-prop":t.obligationData.validatePaidState},model:{value:t.obligationData.paidIn,callback:function(e){t.$set(t.obligationData,"paidIn",e)},expression:"obligationData.paidIn"}})],1):a("div",[t._v(" "+t._s(t.obligationData.paidIn)+" ")])]),t.isEdit?a("div",{on:{click:function(e){return t.$emit("remove",t.obligationData.userId)}}},[a("b-icon-x",{staticClass:"text-white",attrs:{"font-scale":"2"}})],1):t._e()])},Fe=[],qe={name:"DiscardObligationItem",props:{obligationData:{type:Object,required:!0},isEdit:{type:Boolean},editAmount:{type:Boolean}},components:{PriceInput:it},data:function(){return{avatarLink:""}},mounted:function(){this.obligationData.idUser?this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.obligationData.idUser.id):this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.obligationData.userId)}},Le=qe,Ue=Object(x["a"])(Le,Ae,Fe,!1,null,"a58bbaaa",null),Ve=Ue.exports,We={name:"GroupDiscardEditObligation",props:["discardId"],components:{DiscardObligationItem:Ve,PriceInput:it},data:function(){return{obligations:[],obligationsToRemove:[],members:[],membersToAdd:[],name:"",amountInput:0,spreadType:"",validationState:null,validationMessage:"",typesOfSpread:[{value:"spreading",text:"Rozłożenie kwoty"},{value:"specified",text:"Określona składka"},{value:"manual",text:"Ręczne"}]}},computed:{manualEditAmount:function(){return"manual"===this.spreadType},amountInfo:function(){return this.obligations.reduce((function(t,e){return t+Number(e.amount)}),0).toFixed(2)},notObligatedUsers:function(){var t=this.obligations.map((function(t){return t.userId}));return this.members.filter((function(e){return!t.includes(e.id)}))}},methods:{calculateAmountInput:function(){switch(this.spreadType){case"spreading":this.amountInput=this.obligations.reduce((function(t,e){return t+Number(e.amount)}),0);break;case"specified":this.amountInput=this.obligations.length?this.obligations[0].amount:0;break;default:}},calculateAmount:function(){var t=this;switch(this.spreadType){case"spreading":var e=(this.amountInput/this.obligations.length).toFixed(2);this.obligations.forEach((function(t){return t.amount=e}));break;case"specified":this.obligations.forEach((function(e){return e.amount=t.amountInput}));break;default:}},addMembers:function(){var t=this;this.membersToAdd.forEach((function(e){var a=t.obligationsToRemove.findIndex((function(t){return t.userId===e}));if(-1!==a)t.obligations.push(t.obligationsToRemove[a]),t.obligationsToRemove.splice(a,1);else{var i=t.members.find((function(t){return e===t.id})),s=i.login;t.obligations.push({userId:e,obligationId:null,amount:0,login:s,paidIn:0,validateAmountState:null,validatePaidState:null})}})),this.calculateAmount()},removeMember:function(t){var e=this.obligations.findIndex((function(e){return e.userId===t}));this.obligations[e].obligationId&&this.obligationsToRemove.push(this.obligations[e]),this.obligations.splice(e,1),this.calculateAmount()},saveChanges:function(){var t=this;if(this.calculateAmount(),this.validate(),this.validationState){var e=new FormData,a=this.obligationsToRemove.map((function(t){return t.obligationId})),i=this.obligations.map((function(t){return{obligationId:t.obligationId,userId:t.userId,amount:t.amount,paidIn:t.paidIn}}));e.append("removedObligations",JSON.stringify(a)),e.append("discardCycleId",this.discardId),e.append("newAndModifiedObligations",JSON.stringify(i)),e.append("spreadType",this.spreadType),this.loading=!0,this.axios({method:"post",url:"/discard/obligations/edit/",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.$store.dispatch("getDiscardDetails",t.discardId),t.showMessage("Należności zostały zaakutualizowane","Edycja Należności","/discard/details/1/".concat(t.discardId)),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},validate:function(){this.validationMessage="",this.validationState=!0,this.obligations.forEach((function(t){t.validateAmountState=!0,t.validatePaidState=!0}));var t=this.obligations.filter((function(t){return t.amount<1||t.paidIn<0}));t.length&&(t.forEach((function(t){t.amount<1?t.validateAmountState=!1:t.validatePaidState=!1})),this.validationMessage+="Wpłata >= 0; Należność >=1",this.validationState=!1),this.obligations.length||(this.validationMessage+="Lista nie może być pusta.",this.validationState=!1)},loadData:function(){var t=this;this.loading=!0,this.axios.get("/discard/obligations/edit/".concat(this.discardId)).then((function(e){e.data.data?(t.obligations=e.data.data.discard.obligations,t.obligations=t.obligations.map((function(t){return{obligationId:t.id,userId:t.idUser.id,amount:t.amount,login:t.idUser.login,paidIn:t.paidIn,validateAmountState:null,validatePaidState:null}})),t.obligationsBeforeEdit=t.obligations,t.name=e.data.data.discard.idDiscard.name,t.spreadType=e.data.data.discard.typeOfSpread,t.members=e.data.data.members,t.calculateAmountInput()):t.showMessage(e.data.data.message,"Edycja Należności","/groups"),t.loading=!1})).catch((function(e){if(t.loading=!1,405===e.response.status)return t.$router.push("groups");t.fetchErr(e)}))}},created:function(){this.loadData()}},Ze=We,Be=(a("f96c"),Object(x["a"])(Ze,Re,Ye,!1,null,"16c66f5e",null)),He=Be.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 p-3",attrs:{id:"groupDiscardEditWrapper"}},[a("div",{staticClass:"col-11 col-sm-9 col-md-8 col-xl-7 mx-auto"},[a("h2",{staticClass:"greenText mt-4"},[t._v("Edycja Informacji")]),a("b-form-group",{attrs:{label:"Nazwa","invalid-feedback":t.validationMessages.name,state:t.validationRequiredStates.name}},[a("b-input",{attrs:{state:t.validationRequiredStates.name},on:{input:t.validationName},model:{value:t.discardInfo.idDiscard.name,callback:function(e){t.$set(t.discardInfo.idDiscard,"name",e)},expression:"discardInfo.idDiscard.name"}})],1),a("b-form-group",{attrs:{label:"Opis","invalid-feedback":t.validationMessages.description,state:t.validationDescriptionState,description:"Można też tu umieścić opis sposobu platności"}},[a("b-textarea",{attrs:{state:t.validationDescriptionState},on:{input:t.validationDescription},model:{value:t.discardInfo.idDiscard.description,callback:function(e){t.$set(t.discardInfo.idDiscard,"description",e)},expression:"discardInfo.idDiscard.description"}})],1),a("b-form-group",{attrs:{label:"Wybierz datę płatności z listy"}},[a("b-select",{attrs:{options:t.dateOptions,size:"sm"},on:{change:t.changeSelectDate},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),a("b-form-group",{staticClass:"mt-2",attrs:{label:"lub podaj własną","invalid-feedback":t.validationMessages.date,state:t.validationRequiredStates.date}},[a("b-form-datepicker",{staticClass:"text-left",attrs:{placeholder:"Termin płatności",size:"sm",state:t.validationRequiredStates.date,"date-format-options":t.datePickerFormat},on:{input:t.validationDate},model:{value:t.discardInfo.dateOfPayment,callback:function(e){t.$set(t.discardInfo,"dateOfPayment",e)},expression:"discardInfo.dateOfPayment"}})],1),a("b-radio-group",{staticClass:"mt-4 mx-auto",attrs:{options:t.typeOptions},model:{value:t.discardType,callback:function(e){t.discardType=e},expression:"discardType"}}),"cyclical"===t.discardType?a("div",{staticClass:"mx-auto my-4"},[a("b-form-group",{attrs:{label:"Odnawiaj co",state:t.validationRequiredStates.interval,"invalid-feedback":t.validationMessages.interval}},[a("b-form-select",{attrs:{size:"sm",options:t.cyclicalIntervalOptions,state:t.validationRequiredStates.interval},on:{change:t.validateInterval},model:{value:t.intervalValue,callback:function(e){t.intervalValue=e},expression:"intervalValue"}})],1)],1):t._e(),a("b-button",{staticClass:"btnGreen my-4",on:{click:t.saveChanges}},[t._v("Zapisz")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Ke=[],Qe={name:"GroupDiscardEdit",props:["discardId"],data:function(){return{discardInfo:{idDiscard:{}},intervalValue:null,discardType:"oneTime",dateOptions:[],selectedDate:"",validationRequiredStates:{date:null,name:null,interval:null},startDate:"",validationDescriptionState:null,validationMessages:{date:"",description:"",name:"",interval:""},cyclicalIntervalOptions:[{value:null,text:"Wybierz opcję"},{value:"oneWeek",text:"Tydzień"},{value:"twoWeeks",text:"Dwa tygodnie"},{value:"month",text:"Miesiąc"},{value:"twoMonths",text:"Dwa miesiące"},{value:"halfYear",text:"Pół roku"},{value:"year",text:"Rok"}],typeOptions:[{value:"cyclical",text:"Cykliczna"},{value:"oneTime",text:"Jednorazowa"}],datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"}}},methods:{changeSelectDate:function(){this.discardInfo.dateOfPayment=this.selectedDate,this.validationDate()},validationName:function(){this.validationRequiredStates.name=!0,this.validationMessages.name="",/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]{3,40}$/.test(this.discardInfo.idDiscard.name)||(this.validationRequiredStates.name=!1,(this.discardInfo.idDiscard.name.length<3||this.discardInfo.idDiscard.name.length>40)&&(this.validationMessages.name+="Długość od 3 do 40 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]*$/.test(this.discardInfo.idDiscard.name)||(this.validationMessages.name+="Dozwolone litery i cyfry oraz spację "))},validationDescription:function(){this.validationDescriptionState=!0,this.validationMessages.description="",this.discardInfo.idDiscard.description?/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]{1,150}$/.test(this.discardInfo.idDiscard.description)||(this.validationDescriptionState=!1,this.discardInfo.idDiscard.description.length>150&&(this.validationMessages.description+="Maksymalna długość to 150 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]+$/.test(this.discardInfo.idDiscard.description)||(this.validationMessages.description+="Dozwolone litery, cyfry oraz spację, enter oraz ( - , ( ) ! ? )")):this.validationDescriptionState=null},validationDate:function(){if(this.validationRequiredStates.date=!0,this.validationMessages.date="",this.discardInfo.dateOfPayment)if(this.discardInfo.dateOfPayment<this.startDate)this.validationRequiredStates.date=!1,this.validationMessages.date="Data nie może byc mniejsza od daty edytowanej";else{var t=this.$dayjs(this.$dayjs().format("YYYY-MM-DD")),e=this.$dayjs(this.discardInfo.dateOfPayment),a=Math.abs(e.diff(t,"days"));a>365&&(this.validationRequiredStates.date=!1,this.validationMessages.date="Nie może być większy niż rok.")}else this.validationRequiredStates.date=!1,this.validationMessages.date="To pole nie może by puste."},validateInterval:function(){this.validationRequiredStates.interval=!0,this.validationMessages.interval="","cyclical"!==this.discardType||this.intervalValue?this.validationRequiredStates.interval=null:(this.validationRequiredStates.interval=!1,this.validationMessages.interval="Wybierz jedną z opcji.")},saveChanges:function(){var t=this;this.validationDescription(),this.validationDate(),this.validationName(),this.validateInterval();var e=Object.values(this.validationRequiredStates).find((function(t){return!1===t}));if(void 0===e){var a=new FormData,i="cyclical"===this.discardType;a.append("name",this.discardInfo.idDiscard.name),a.append("dateOfPayment",this.discardInfo.dateOfPayment),a.append("isCyclic",i),a.append("discardId",this.discardInfo.idDiscard.id),a.append("discardCycleId",this.discardId),i&&a.append("cyclicalInterval",this.intervalValue),this.discardInfo.idDiscard.description&&a.append("description",this.discardInfo.idDiscard.description),this.loading=!0,this.axios.post("/discard/group/discard/info/edit/",a).then((function(){t.showMessage("Zrzutka została zaktualizowana","Edycja zrzutki","/discard/details/0/".concat(t.discardId)),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}}},created:function(){var t=this;this.loading=!0;var e=this.$dayjs();this.dateOptions=[{text:"Wybierz",value:""},{text:"Za tydzień",value:e.add(1,"week").format("YYYY-MM-DD")},{text:"Za dwa tygodnie",value:e.add(2,"week").format("YYYY-MM-DD")},{text:"Za miesiąc",value:e.add(1,"month").format("YYYY-MM-DD")},{text:"Za dwa miesiące",value:e.add(2,"month").format("YYYY-MM-DD")},{text:"Za pół roku",value:e.add(6,"month").format("YYYY-MM-DD")},{text:"Za rok",value:e.add(1,"year").format("YYYY-MM-DD")}],this.axios.get("/discard/group/discard/info/edit/".concat(this.discardId)).then((function(e){e.data.data?(t.discardInfo=e.data.data,t.discardInfo.dateOfPayment=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),t.startDate=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),t.discardType=t.discardInfo.idDiscard.isCyclic?"cyclical":"oneTime"):(t.infoDataModal.title="Edycja Informacji",t.infoDataModal.info="Coś poszło nie tak",t.infoDataModal.buttonText="Do listy grup",t.location="/groups",t.$bvModal.show("modalInfo")),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("groups");t.fetchErr(e),t.loading=!1}))}},Xe=Qe,ta=(a("4ad7"),Object(x["a"])(Xe,Je,Ke,!1,null,"bc7ddfac",null)),ea=ta.exports,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 p-3",attrs:{id:"singleDiscardCreateWrapper"}},[a("SingleDiscardForm",{attrs:{"is-edit":!1}})],1)},ia=[],sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-11 col-sm-9 col-md-8 col-xl-7 mx-auto"},[a("h2",{staticClass:"greenText"},[t._v(t._s(t.title))]),a("b-form-group",{attrs:{label:"Nazwa*",state:t.validationRequiredStates.name,"invalid-feedback":t.validationMessages.name}},[a("b-input",{attrs:{size:"sm",state:t.validationRequiredStates.name},on:{input:t.validationName},model:{value:t.discardName,callback:function(e){t.discardName=e},expression:"discardName"}})],1),a("b-form-group",{attrs:{label:"Opis",description:"Można też tu umieścić opis sposobu platności","invalid-feedback":t.validationMessages.description,state:t.validationDescriptionState}},[a("b-textarea",{attrs:{state:t.validationDescriptionState,size:"sm"},on:{input:t.validationDescription},model:{value:t.discardDescription,callback:function(e){t.discardDescription=e},expression:"discardDescription"}})],1),a("b-form-group",{attrs:{label:"Wybierz datę płatności z listy*"}},[a("b-select",{attrs:{options:t.dateOptions,size:"sm"},on:{change:t.validationDate},model:{value:t.dateOfPayment,callback:function(e){t.dateOfPayment=e},expression:"dateOfPayment"}})],1),a("b-form-group",{staticClass:"mt-2",attrs:{label:"lub podaj własną","invalid-feedback":t.validationMessages.date,state:t.validationRequiredStates.date}},[a("b-form-datepicker",{staticClass:"text-left",attrs:{placeholder:"Termin płatności","date-format-options":t.datePickerFormat,state:t.validationRequiredStates.date,size:"sm"},on:{input:t.validationDate},model:{value:t.dateOfPayment,callback:function(e){t.dateOfPayment=e},expression:"dateOfPayment"}})],1),a("b-form-group",{attrs:{label:"Typ*"}},[a("b-radio-group",{staticClass:"mx-auto",attrs:{options:t.typeOptions},model:{value:t.discardType,callback:function(e){t.discardType=e},expression:"discardType"}})],1),"cyclical"===t.discardType?a("div",{staticClass:"mx-auto mt-4"},[a("b-form-group",{attrs:{label:"Odnawiaj co",state:t.validationRequiredStates.interval,"invalid-feedback":t.validationMessages.interval}},[a("b-form-select",{attrs:{size:"sm",options:t.cyclicalIntervalOptions,state:t.validationRequiredStates.interval},on:{change:t.validateInterval},model:{value:t.intervalValue,callback:function(e){t.intervalValue=e},expression:"intervalValue"}})],1)],1):t._e(),!0!==t.isEdit?a("div",[a("b-form-group",{attrs:{label:"Jestem*"}},[a("b-radio-group",{staticClass:"mx-auto",attrs:{options:t.userIsOptions},model:{value:t.userIs,callback:function(e){t.userIs=e},expression:"userIs"}})],1),a("b-form-group",{staticClass:"mt-4",attrs:{state:t.validationRequiredStates.user,"invalid-feedback":t.validationMessages.user,label:t.userLabel}},[a("b-input",{attrs:{size:"sm",list:"users",state:t.validationRequiredStates.user},on:{change:t.validateUser},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t.userName.length>2?a("datalist",{attrs:{id:"users"}},t._l(t.users,(function(e){return a("option",{key:e.id},[t._v(t._s(e.login))])})),0):t._e()],1)],1):t._e(),a("b-form-group",{staticClass:"mx-auto",attrs:{label:"Kwota*","invalid-feedback":t.validationMessages.amount,state:t.validationRequiredStates.amount}},[a("PriceInput",{key:"specifiedInput",staticClass:"mx-auto",attrs:{"validate-status-prop":t.validationRequiredStates.amount},on:{input:t.validationAmount},model:{value:t.discardAmount,callback:function(e){t.discardAmount=e},expression:"discardAmount"}})],1),!0===t.isEdit?a("b-form-group",{staticClass:"mx-auto",attrs:{label:"Wpłacono","invalid-feedback":t.validationMessages.paidIn,state:t.validationRequiredStates.paidIn}},[a("PriceInput",{key:"specifiedInput",staticClass:"mx-auto",attrs:{"validate-status-prop":t.validationRequiredStates.paidIn},on:{input:t.validatePaidIn},model:{value:t.paidIn,callback:function(e){t.paidIn=e},expression:"paidIn"}})],1):t._e(),a("b-form-text",[t._v("Pola oznaczone * są wymagane")]),a("b-button",{staticClass:"mt-3 mx-auto shadow font-weight-bold btnGreen",on:{click:t.createDiscard}},[t._v(" "+t._s(t.buttonText)+" ")]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},oa=[],na=(a("96cf"),a("1da1")),ra={name:"SingleDiscardForm",props:{discardId:{type:String},isEdit:{type:Boolean,required:!0}},components:{PriceInput:it},data:function(){return{users:[],dateOptions:[],title:"",buttonText:"",dateOfPayment:"",discardInfo:{},payment:{},discardType:"oneTime",intervalValue:null,discardAmount:0,datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"},discardName:"",paidIn:0,discardDescription:"",userIs:"recipient",userName:"",userId:"",validationDescriptionState:null,validationRequiredStates:{date:null,name:null,interval:null,user:null,amount:null,paidIn:null},startDate:"",validationMessages:{date:"",description:"",name:"",interval:"",user:"",amount:"",paidIn:""},userIsOptions:[{value:"recipient",text:"Odbiorcą"},{value:"debtor",text:"Spłacającym"}],typeOptions:[{value:"oneTime",text:"Jednorazowa"},{value:"cyclical",text:"Cykliczna"}],cyclicalIntervalOptions:[{value:null,text:"Wybierz opcję"},{value:"oneWeek",text:"Tydzień"},{value:"twoWeeks",text:"Dwa tygodnie"},{value:"month",text:"Miesiąc"},{value:"twoMonths",text:"Dwa miesiące"},{value:"halfYear",text:"Pół roku"},{value:"year",text:"Rok"}]}},computed:{userLabel:function(){return"recipient"===this.userIs?"Spłacający":"Odbiorca"}},methods:{createDiscard:function(){var t=this;return Object(na["a"])(regeneratorRuntime.mark((function e(){var a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isEdit){e.next=11;break}t.validationName(),t.validationDescription(),t.validationDate(),t.validateInterval(),t.validationAmount(),t.validatePaidIn(),a=Object.values(t.validationRequiredStates).find((function(t){return!1===t})),void 0===a&&(i=new FormData,i.append("name",t.discardName),i.append("isCyclic","cyclical"===t.discardType),i.append("date",t.dateOfPayment),i.append("amount",t.discardAmount),i.append("discardCycleId",t.discardId),i.append("paidIn",t.paidIn),"cyclical"===t.discardType&&i.append("cyclicalInterval",t.intervalValue),t.validationDescriptionState&&i.append("description",t.discardDescription),t.axios.post("/discard/single/edit",i).then((function(){t.showMessage("Zrzutka została zmieniona","Tworzenie zrzutki","/discard/single/details/".concat(t.discardId))})).catch((function(e){t.fetchErr(e)}))),e.next=20;break;case 11:return e.next=13,t.validateUser();case 13:t.validationName(),t.validationDescription(),t.validationDate(),t.validateInterval(),t.validationAmount(),s=Object.values(t.validationRequiredStates).find((function(t){return!1===t})),void 0===s&&(o=new FormData,o.append("name",t.discardName),o.append("isCyclic","cyclical"===t.discardType),o.append("date",t.dateOfPayment),o.append("amount",t.discardAmount),"cyclical"===t.discardType&&o.append("cyclicalInterval",t.intervalValue),t.validationDescriptionState&&o.append("description",t.discardDescription),"recipient"===t.userIs?(o.append("recipientId",t.$store.getters.userId),o.append("debtorId",t.userId)):(o.append("recipientId",t.userId),o.append("debtorId",t.$store.getters.userId)),t.loading=!0,t.axios.post("/discard/single/add",o).then((function(e){t.showMessage("Zrzutka została dodana","Tworzenie zrzutki","/discard/single/details/".concat(e.data.data.discardId)),t.$bvModal.show("modalInfo"),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1})));case 20:case"end":return e.stop()}}),e)})))()},validationAmount:function(){this.validationRequiredStates.amount=!0,this.validationMessages.amount="",this.discardAmount<1&&(this.validationRequiredStates.amount=!1,this.validationMessages.amount="Nie może być mniejsza od 1")},validationName:function(){this.validationRequiredStates.name=!0,this.validationMessages.name="",/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]{3,40}$/.test(this.discardName)||(this.validationRequiredStates.name=!1,(this.discardName.length<3||this.discardName.length>40)&&(this.validationMessages.name+="Długość od 3 do 40 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9\s]*$/.test(this.discardName)||(this.validationMessages.name+="Dozwolone litery i cyfry oraz spację "))},validationDescription:function(){this.validationDescriptionState=!0,this.validationMessages.description="",this.discardDescription?/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]{1,150}$/.test(this.discardDescription)||(this.validationDescriptionState=!1,this.discardDescription.length>150&&(this.validationMessages.description+="Maksymalna długość to 150 znaków. "),/^[a-zA-ZżźćńółęąśŻŹĆĄŚĘŁÓŃ0-9,.!?()\-\s]+$/.test(this.discardDescription)||(this.validationMessages.description+="Dozwolone litery, cyfry oraz spację, enter oraz ( - , ( ) ! ? )")):this.validationDescriptionState=null},validationDate:function(){if(this.validationRequiredStates.date=!0,this.validationMessages.date="",this.dateOfPayment){var t=this.$dayjs(this.$dayjs().format("YYYY-MM-DD")),e=this.$dayjs(this.dateOfPayment),a=Math.abs(e.diff(t,"days"));t>e&&!1===this.isEdit?(this.validationRequiredStates.date=!1,this.validationMessages.date="Nie może być mniejszy od aktualnej daty."):e.format("YYYY-MM-DD")<this.startDate&&this.isEdit?(this.validationRequiredStates.date=!1,this.validationMessages.date="Data nie może byc mniejsza od daty edytowanej"):a>365&&(this.validationRequiredStates.date=!1,this.validationMessages.date="Nie może być większy niż rok.")}else this.validationRequiredStates.date=!1,this.validationMessages.date="To pole nie może by puste."},validateInterval:function(){this.validationRequiredStates.interval=!0,this.validationMessages.interval="","cyclical"!==this.discardType||this.intervalValue?this.validationRequiredStates.interval=null:(this.validationRequiredStates.interval=!1,this.validationMessages.interval="Wybierz jedną z opcji.")},validatePaidIn:function(){this.validationRequiredStates.paidIn=!0,this.validationMessages.paidIn="",this.paidIn<0?(this.validationRequiredStates.paidInl=!1,this.validationMessages.paidIn="Nie może być mniejsze od zera."):this.validationRequiredStates.paid=null},validateUser:function(){var t=this;return Object(na["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.validationRequiredStates.user=!0,t.validationMessages.user="",t.userName!==t.$store.getters.login){e.next=7;break}t.validationRequiredStates.user=!1,t.validationMessages.user="Nie możesz dodać samego siebie.",e.next=10;break;case 7:return t.loading=!0,e.next=10,t.axios.get("/user/checkLogin?login=".concat(t.userName)).then((function(e){!0===e.data.message&&"active"===e.data.data.status?(t.validationRequiredStates.user=!0,t.userId=e.data.data.id):(t.validationRequiredStates.user=!1,t.validationMessages.user+="Nie ma takiego użytkownika."),t.loading=!1}));case 10:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this,e=this.$dayjs();this.title=this.isEdit?"Edycja zrzutki":"Tworzenie pojedyńczej zbiórki",this.buttonText=this.isEdit?"Zapisz":"Dodaj",this.dateOptions=[{text:"Wybierz",value:""},{text:"Za tydzień",value:e.add(1,"week").format("YYYY-MM-DD")},{text:"Za dwa tygodnie",value:e.add(2,"week").format("YYYY-MM-DD")},{text:"Za miesiąc",value:e.add(1,"month").format("YYYY-MM-DD")},{text:"Za dwa miesiące",value:e.add(2,"month").format("YYYY-MM-DD")},{text:"Za pół roku",value:e.add(6,"month").format("YYYY-MM-DD")},{text:"Za rok",value:e.add(1,"year").format("YYYY-MM-DD")}],this.isEdit?this.axios.get("/discard/single/edit/".concat(this.discardId)).then((function(e){if(e.data.info)return t.discardInfo=e.data.info,t.discardInfo.dateOfPayment=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),t.discardAmount=t.discardInfo.obligation.amount,t.discardName=t.discardInfo.idDiscard.name,t.discardDescription=t.discardInfo.idDiscard.description,t.dateOfPayment=t.discardInfo.dateOfPayment,t.discardType=t.discardInfo.idDiscard.isCyclic?"cyclical":"oneTime",t.paidIn=t.discardInfo.obligation.paidIn,t.startDate=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),void(t.loading=!1);t.showMessage("Coś poszło nie tak","Szczegóły zrzutki","/home"),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/home");t.loading=!1,t.fetchErr(e)})):(this.loading=!0,this.axios.get("/user/list").then((function(e){e.data&&(t.users=e.data.data),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/groups");t.fetchErr(e),t.loading=!1})))}},la=ra,da=Object(x["a"])(la,sa,oa,!1,null,"bd9ba196",null),ca=da.exports,ua={name:"SingleDiscardCreate",components:{SingleDiscardForm:ca}},ma=ua,pa=(a("9f14"),Object(x["a"])(ma,aa,ia,!1,null,"38445c62",null)),fa=pa.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-4 mb-3",attrs:{id:"singleDiscardDetailsWrapper"}},[t.discardInfo.idDiscard?a("h2",{staticClass:"greenText"},[t._v(" "+t._s(t.discardInfo.idDiscard.name)+" ")]):t._e(),a("div",{staticClass:"my-3 font-weight-bold"},[t._v(" Termin: "),a("span",{staticClass:"greenText"},[t._v(" "+t._s(t.discardInfo.dateOfPayment)+" ")])]),t.discardInfo.idDiscard?a("div",{staticClass:"my-4"},[t.discardInfo.idDiscard.description?a("div",[t._v(" "+t._s(t.discardInfo.idDiscard.description)+" ")]):a("div",[t._v(" Brak Opisu ")])]):t._e(),a("div",["recipient"===t.permission?a("div",[a("div",{staticClass:"my-3 font-weight-bold"},[t._v(" Dłużnik "),a("span",{staticClass:"greenText"},[t._v(" "+t._s(t.discardInfo.obligation.idUser.login)+" ")])]),a("div",{staticClass:"col-12 col-sm-9 col-md-8 col-xl-6 mx-auto"},t._l(t.payments,(function(e){return a("GroupDiscardPaymentItem",{key:e.id,attrs:{"payment-data":e},on:{modalMessage:t.printMessage}})})),1)]):a("div",[a("div",{staticClass:"my-3 font-weight-bold"},[t._v(" Odbiorca "),t.discardInfo.idDiscard?a("span",{staticClass:"greenText"},[t._v(" "+t._s(t.discardInfo.idDiscard.idRecipient.login)+" ")]):t._e()])]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" Do zapłaty ")]),t.discardInfo.obligation?a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.discardInfo.obligation.amount)+" ")]):t._e()]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" "+t._s(t.labelAmount)+" ")]),t.discardInfo.obligation?a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.amountToPrint)+" ")]):t._e()]),a("b-badge",{staticClass:"greenBadge p-1 mb-1 mx-1"},[a("div",{staticClass:"h5"},[t._v(" Wpłacono ")]),t.discardInfo.obligation?a("div",{staticClass:"h5 p-0"},[t._v(" "+t._s(t.discardInfo.obligation.paidIn)+" ")]):t._e()])],1),a("div",["debtor"!==t.permission||t.isPaid?t._e():a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.toPayment}},[t._v(" Zapłać ")]),"recipient"===t.permission?a("b-button",{staticClass:"btnGreen mx-1",on:{click:function(e){return t.toEdit()}}},[t._v(" Edytuj ")]):t._e(),"recipient"===t.permission?a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.showConfirmModal}},[t._v(" Usuń ")]):t._e()],1),a("b-modal",{attrs:{id:"modalPayment","hide-footer":"",title:"Płatność"}},[a("p",{staticClass:"my-4"},[t._v(t._s(t.modalInfo))]),a("b-button",{staticClass:"mt-3",attrs:{id:"buttonModal"},on:{click:function(e){return t.$bvModal.hide("modalPayment")}}},[t._v(" Ok ")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},ha=[],va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"groupDiscardPaymentItem greenBadge shadow rounded\nrow justify-content-between align-items-center mx-auto px-3 py-2 my-2",on:{click:t.more}},[a("div",[t._v(" "+t._s(t.paymentData.idUser.login)+" wpłacił "+t._s(t.paymentData.amount)+" ")]),a("b-icon-triangle-fill",{attrs:{"font-scale":"1",rotate:t.degrees}}),t.showMore?a("div",{staticClass:"col-12 row justify-content-center align-items-center mt-2 mx-auto"},[a("b-button",{staticClass:"shadow",on:{click:function(e){return t.acceptInvite(!0)}}},[t._v("Akceptuj")]),a("b-button",{staticClass:"shadow",on:{click:function(e){return t.acceptInvite(!1)}}},[t._v("Odrzuć")])],1):t._e()],1)},ba=[],ya={name:"GroupDiscardPaymentItem",props:{paymentData:{type:Object,required:!0}},data:function(){return{showMore:!1,degrees:180}},methods:{more:function(){this.showMore=!this.showMore,this.degrees=180===this.degrees?0:180},acceptInvite:function(t){var e=this,a=new FormData;a.append("isAccepted",t),a.append("paymentId",this.paymentData.id),this.axios.post("/discard/payment/accept",a).then((function(){var a=t?"Płatność została zakceptowana":"Płatność została odrzucona";e.$emit("modalMessage",[a,e.paymentData.id])})).catch((function(){e.$emit("modalMessage",["Coś poszło nie tak",e.paymentData.id])}))}}},xa=ya,Da=(a("8778"),Object(x["a"])(xa,va,ba,!1,null,"36ce61fe",null)),wa=Da.exports,Ca={name:"SingleDiscardDetails",props:["discardId"],components:{GroupDiscardPaymentItem:wa},data:function(){return{discardInfo:{},permission:"",amountLeft:0,payments:[],isPaid:!1,modalInfo:"",confirmModalValue:""}},computed:{labelAmount:function(){return this.isPaid?"Nadwyżka":"Pozostało"},amountToPrint:function(){return this.isPaid?-1*this.amountLeft:this.amountLeft}},methods:{showConfirmModal:function(){var t=this;this.confirmModalValue="",this.$bvModal.msgBoxConfirm("Czy na pewno chcesz usunąć?",{okTitle:"Tak",cancelTitle:"Nie"}).then((function(e){if(e){t.loading=!0;var a=new FormData;a.append("discardCycleId",t.discardId),t.axios.post("/discard/single/delete",a).then((function(){t.showMessage("Zrzutka została usunięta.","Usunięcie zrzutki","/"),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}}))},printMessage:function(t){t[2]?this.fetchErr(t[2]):(this.loadData(),this.modalInfo=t[0],this.$bvModal.show("modalPayment"))},toEdit:function(){this.$router.push({path:"/discard/single/edit/".concat(this.discardId)})},toPayment:function(){this.$router.push({path:"/payment/single/".concat(this.discardId)})},loadData:function(){var t=this;this.axios.get("/discard/single/details/".concat(this.discardId)).then((function(e){if(e.data.info)return t.discardInfo=e.data.info,t.permission=e.data.permission,t.payments=e.data.payments,t.discardInfo.dateOfPayment=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),t.amountLeft=Number((t.discardInfo.obligation.amount-t.discardInfo.obligation.paidIn).toFixed(2)),t.isPaid=t.discardInfo.obligation.amount<=t.discardInfo.obligation.paidIn,void(t.loading=!1);t.showMessage("Coś poszło nie tak","Szczegóły zrzutki","/home"),t.loading=!1})).catch((function(e){if(405===e.response.status)return t.$router.push("/home");t.loading=!1,t.fetchErr(e)}))}},created:function(){this.loadData()}},ka=Ca,Ia=(a("86f5"),Object(x["a"])(ka,ga,ha,!1,null,"2fdf38bf",null)),_a=Ia.exports,Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 p-3",attrs:{id:"singleDiscardEditWrapper"}},[a("SingleDiscardForm",{attrs:{"discard-id":t.discardId,"is-edit":!0}})],1)},Pa=[],Oa={name:"SingleDiscardEdit",props:["discardId"],components:{SingleDiscardForm:ca}},za=Oa,Sa=(a("d3f9"),Object(x["a"])(za,Ma,Pa,!1,null,"53bf592a",null)),Ta=Sa.exports,ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mx-auto col-12 col-md-10 col-lg-9 col-xl-8 text-white",attrs:{id:"discardsWrapper"}},[a("h2",{staticClass:"my-5"},[t._v("Zrzutki")]),a("b-form-input",{staticClass:"col-xl-3 col-lg-4 col-md-5 col-10 mx-auto pb-0 my-4",attrs:{type:"search",size:"sm",placeholder:"Nazwa"},model:{value:t.discardNameSearch,callback:function(e){t.discardNameSearch=e},expression:"discardNameSearch"}}),a("transition-group",{staticClass:"row justify-content-center discardsList mx-auto\ncol-12 col-xl-10",class:{fewElements:t.numberOfItems<=t.itemsPerPage},attrs:{name:"list"}},t._l(t.selectedItems,(function(t){return a("DiscardListItem",{key:t.id,attrs:{"discard-data":t,"all-discards":!0}})})),1),0!==t.selectedItems.length||t.loading?t._e():a("p",{staticClass:"mt-5"},[t._v(" Brak Zrzutek")]),t.numberOfItems>t.itemsPerPage?a("b-pagination",{staticClass:"pagination",attrs:{align:"center","total-rows":t.numberOfItems,"per-page":t.itemsPerPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),a("FilterButtonsModal",{attrs:{link:"/discard/type","permission-add":!0}},[a("div",{staticClass:"row mx-auto align-items-start justify-content-center bv-d-md-down-none\n    mx-auto my-4"},[a("div",{staticClass:"col-sm-7 col-lg-6 col-xl-5"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",[a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Od:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Do:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-5"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",[a("PriceInput",{key:"amountFrom",staticClass:"col-6",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountTo",staticClass:"col-6",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Typ")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.typeOptions,size:"sm"},on:{change:t.clearOptionsOnChangeType},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),"group"===t.selectedType?a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Grupa")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.groups,size:"sm"},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}})],1):t._e(),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Gdzie")]),a("b-form-select",{staticClass:"mx-auto",attrs:{options:t.whereOptions,size:"sm"},on:{change:t.clearOnWhereOptionChange},model:{value:t.whereValue,callback:function(e){t.whereValue=e},expression:"whereValue"}})],1),"single"===t.selectedType&&!0===t.whereValue?a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Odbiorca")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.recipients,size:"sm"},model:{value:t.selectedRecipient,callback:function(e){t.selectedRecipient=e},expression:"selectedRecipient"}})],1):t._e(),"single"===t.selectedType&&!1===t.whereValue?a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Dłużnik")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.debtors,size:"sm"},model:{value:t.selectedDebtor,callback:function(e){t.selectedDebtor=e},expression:"selectedDebtor"}})],1):t._e(),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("b-form-group",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Pokaż")]),a("b-form-checkbox-group",{attrs:{id:"checkbox-group-1",options:t.showOptions,name:"flavour-1"},model:{value:t.selectedShow,callback:function(e){t.selectedShow=e},expression:"selectedShow"}})],1),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)],1),a("div",{staticClass:"row justify-content-center mb-4 d-lg-none"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Od:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Do:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("PriceInput",{key:"amountFromModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountToModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Typ")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.typeOptions,size:"sm"},on:{change:t.clearOptionsOnChangeType},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),"group"===t.selectedType?a("div",{staticClass:"col-8 px-auto"},[a("div",{staticClass:"text-left"},[t._v("Grupa")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.groups,size:"sm"},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}})],1):t._e(),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Gdzie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.whereOptions,size:"sm"},on:{change:t.clearOnWhereOptionChange},model:{value:t.whereValue,callback:function(e){t.whereValue=e},expression:"whereValue"}})],1),"single"===t.selectedType&&!0===t.whereValue?a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Odbiorca")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.recipients,size:"sm"},model:{value:t.selectedRecipient,callback:function(e){t.selectedRecipient=e},expression:"selectedRecipient"}})],1):t._e(),"single"===t.selectedType&&!1===t.whereValue?a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Dłużnik")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.debtors,size:"sm"},model:{value:t.selectedDebtor,callback:function(e){t.selectedDebtor=e},expression:"selectedDebtor"}})],1):t._e(),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("b-form-group",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Pokaż")]),a("b-form-checkbox-group",{staticClass:"ml-2",attrs:{id:"checkbox-group-1",options:t.showOptions,name:"flavour-1"},model:{value:t.selectedShow,callback:function(e){t.selectedShow=e},expression:"selectedShow"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)],1)]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Na=[],$a=(a("6062"),a("3ca3"),a("ddb0"),a("2909")),Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"discardListItemWrapper col-11 col-sm-5 col-md-5 col-lg-5 m-1 p-0"},[a("div",{staticClass:"content shadow",on:{click:t.more}},[a("div",{staticClass:"greenBadge shadow col-12 py-2 font-weight-bold"},[t._v(" "+t._s(t.discardData.name)+" ")]),"group"===t.discardData.type?a("b-row",{staticClass:"p-3"},[a("b-col",{staticClass:"text-left font-weight-bold mb-1 col-5"},[a("div",[t._v("Termin:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.dateOfPayment)+" ")])]),!1!==t.discardData.isPaid&&t.allDiscards?t._e():a("b-col",{staticClass:"text-right font-weight-bold mr-0"},[a("div",[t._v("Pozostało:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountLeft)+" ")])]),!0===t.discardData.isPaid?a("b-col",{staticClass:"text-right font-weight-bold mr-0"},[a("div",[t._v("Nadpłata:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountOver)+" ")])]):t._e(),t.showMore?a("b-col",{staticClass:"text-left font-weight-bold col-5"},[a("div",[t._v("Grupa:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.groupName)+" ")])]):t._e()],1):t._e(),"single"===t.discardData.type?a("b-row",{staticClass:"p-3"},[a("b-col",{staticClass:"text-left font-weight-bold mb-1 col-5"},[a("div",[t._v("Termin:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.dateOfPayment)+" ")])]),!1!==t.discardData.isPaid&&t.allDiscards?t._e():a("b-col",{staticClass:"text-right font-weight-bold mr-0"},[a("div",[t._v("Pozostało:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountLeft)+" ")])]),!0===t.discardData.isPaid?a("b-col",{staticClass:"text-right font-weight-bold mr-0"},[a("div",[t._v("Nadpłata:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.amountOver)+" ")])]):t._e(),t.showMore?a("b-col",{staticClass:"text-left font-weight-bold col-5"},[!0===t.isCurrUserRecipient?a("div",[a("div",[t._v("Dłużnik:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.debtor)+" ")])]):a("div",[a("div",[t._v("Odbiorca:")]),a("div",{staticClass:"greenText"},[t._v(" "+t._s(t.discardData.recipient)+" ")])])]):t._e()],1):t._e(),t.showMore?a("div",{staticClass:"mb-1"},[!0===t.discardData.takePart&&!t.discardData.isPaid||!t.allDiscards?a("b-button",{staticClass:"btnGreen shadow mx-1",on:{click:t.toPayment}},[t._v("Zapłać")]):t._e(),a("b-button",{staticClass:"btnGreen shadow mx-1",on:{click:t.toDetails}},[t._v("Szczegóły")])],1):t._e(),a("b-icon-triangle-fill",{staticClass:"my-2",attrs:{rotate:t.degrees}})],1)])},Ga=[],Ra={name:"DiscardListItem",props:{discardData:{type:Object,required:!0},allDiscards:{type:Boolean}},data:function(){return{showMore:!1,degrees:180}},computed:{isCurrUserRecipient:function(){return this.discardData.recipient===this.$store.getters.login}},methods:{more:function(){this.showMore=!this.showMore,this.degrees=180===this.degrees?0:180},toPayment:function(){this.$router.push({path:"/payment/".concat(this.discardData.type,"/").concat(this.discardData.id)})},toDetails:function(){var t="group"===this.discardData.type?"/discard/details/0/".concat(this.discardData.id):"/discard/single/details/".concat(this.discardData.id);this.$router.push({path:t})}}},Ya=Ra,Aa=(a("af54"),Object(x["a"])(Ya,Ea,Ga,!1,null,"606840c7",null)),Fa=Aa.exports,qa={name:"Discards",mixins:[S,st],components:{DiscardListItem:Fa,PriceInput:it,FilterButtonsModal:ct},data:function(){return{discards:[],discardNameSearch:"",groups:[],recipients:[],debtors:[],selectedRecipient:null,selectedDebtor:null,selectedGroup:null,amountTo:0,amountFrom:0,dateFrom:null,dateTo:null,sortingValue:5,selectedType:null,whereValue:null,selectedShow:["paid","unpaid"],datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"},showOptions:[{text:"Opłacone",value:"paid"},{text:"Nieopłacone",value:"unpaid"}],typeOptions:[{value:null,text:"Wszystkie"},{value:"single",text:"Pojedyńcze"},{value:"group",text:"Grupowe"}],pageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:30,text:"30"}],sortingOptions:[{value:1,text:"Rosnąco po nazwie"},{value:2,text:"Malejąco po nazwie"},{value:3,text:"Rosnąco po kwocie"},{value:4,text:"Malejąco po kwocie"},{value:5,text:"Rosnąco po dacie"},{value:6,text:"Malejąco po dacie"}],whereOptions:[{value:null,text:"Wszystko"},{value:!0,text:"jestem dłużnikiem"},{value:!1,text:"jestem odbiorcą"}]}},computed:{filtredItems:function(){var t=this;if(!this.discards)return[];var e=this.discards;switch(e=e.filter((function(e){if(!t.selectedShow.includes(e.isPaid?"paid":"unpaid"))return!1;if(t.discardNameSearch&&-1===e.name.toUpperCase().indexOf(t.discardNameSearch.toUpperCase()))return!1;if(t.selectedType){if(e.type!==t.selectedType)return!1;if(t.selectedRecipient&&e.recipient!==t.selectedRecipient)return!1;if(t.selectedDebtor&&e.debtor!==t.selectedDebtor)return!1}if(t.selectedGroup&&e.groupName!==t.selectedGroup)return!1;if(null!==t.whereValue&&t.whereValue!==e.takePart)return!1;if(t.selectedUser&&e.userName!==t.selectedUser)return!1;if(t.amountFrom){var a=e.isPaid?e.amountOver:e.amountLeft;if(a<t.amountFrom)return!1}if(t.amountTo){var i=e.isPaid?e.amountOver:e.amountLeft;if(i>t.amountTo)return!1}if(t.dateFrom){var s=t.$dayjs(t.dateFrom),o=t.$dayjs(e.dateOfPayment);if(o<s)return!1}if(t.dateTo){var n=t.$dayjs(t.dateTo),r=t.$dayjs(e.dateOfPayment);if(r>n)return!1}return!0})),this.sortingValue){case 1:e=e.sort((function(e,a){return t.sortingAsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 2:e=e.sort((function(e,a){return t.sortingDsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 3:e=e.sort((function(e,a){var i=e.isPaid?e.amountOver:e.amountLeft,s=a.isPaid?a.amountOver:a.amountLeft;return console.log(i,s),t.sortingAsc(i,s)}));break;case 4:e=e.sort((function(e,a){var i=e.isPaid?e.amountOver:e.amountLeft,s=a.isPaid?a.amountOver:a.amountLeft;return t.sortingDsc(i,s)}));break;case 5:e=e.sort((function(e,a){return t.sortingAsc(e.dateOfPayment,a.dateOfPayment)}));break;default:e=e.sort((function(e,a){return t.sortingDsc(e.dateOfPayment,a.dateOfPayment)}))}return e}},methods:{clearOptionsOnChangeType:function(){this.selectedGroup=null,this.selectedDebtor=null,this.selectedRecipient=null,this.whereValue=null},clearOnWhereOptionChange:function(){this.selectedRecipient=null,this.selectedDebtor=null}},created:function(){var t=this;this.loading=!0,this.axios.get("/discard/all").then((function(e){if(t.discards=e.data.data,t.discards.length){t.discards=t.discards.map((function(e){var a={id:e.id,name:e.idDiscard.name,dateOfPayment:t.$dayjs(e.dateOfPayment).format("YYYY-MM-DD"),groupName:e.idDiscard.idGroup?e.idDiscard.idGroup.name:null,type:e.idDiscard.type},i=0,s=0;e.obligation?(i=e.obligation.paidIn,s=e.obligation.amount,a.debtor=t.$store.getters.login):"group"===a.type?e.obligations.forEach((function(t){i+=t.paidIn,s+=t.amount})):(i=e.obligations[0].paidIn,s=e.obligations[0].amount,a.debtor=e.obligations[0].idUser.login),a=Object(Yt["a"])({amount:s,paidIn:i},a);var o=Number((a.amount-a.paidIn).toFixed(2));return o>0?(a.isPaid=!1,a.amountLeft=o):(a.isPaid=!0,a.amountOver=o<0?-1*o:0),"single"===a.type&&(a.recipient=e.idDiscard.idRecipient.login),a.takePart=a.debtor===t.$store.getters.login,a.obligation=e.obligation,a}));var a=t.discards.map((function(t){return new Date(t.dateOfPayment)})),i=t.discards.map((function(t){return t.isPaid?t.amountOver:t.amountLeft})),s=t.discards.filter((function(t){return"single"===t.type})),o=t.discards.filter((function(t){return"group"===t.type}));t.debtors=s.map((function(t){return t.debtor})).filter((function(e){return e!==t.$store.getters.login})),t.recipients=s.map((function(t){return t.recipient})).filter((function(e){return e!==t.$store.getters.login})),t.groups=o.map((function(t){return t.groupName})),t.debtors=Object($a["a"])(new Set(t.debtors)),t.debtors=t.debtors.map((function(t){return{value:t,text:t}})),t.debtors.unshift({value:null,text:"Wybierz"}),t.recipients=Object($a["a"])(new Set(t.recipients)),t.recipients=t.recipients.map((function(t){return{value:t,text:t}})),t.recipients.unshift({value:null,text:"Wybierz"}),t.groups=Object($a["a"])(new Set(t.groups)),t.groups=t.groups.map((function(t){return{value:t,text:t}})),t.groups.unshift({value:null,text:"Wybierz"}),t.dateFrom=t.$dayjs(Math.min.apply(null,a)).format("YYYY-MM-DD"),t.dateTo=t.$dayjs(Math.max.apply(null,a)).format("YYYY-MM-DD"),t.amountFrom=Math.min.apply(null,i),t.amountTo=Math.max.apply(null,i),t.loading=!1}t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},La=qa,Ua=Object(x["a"])(La,ja,Na,!1,null,"751b314e",null),Va=Ua.exports,Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mx-auto col-12 col-sm-10  col-md-9 text-white",attrs:{id:"invitesWrapper"}},[a("h2",{staticClass:"my-5"},[t._v("Zaproszenia")]),a("transition-group",{staticClass:"row justify-content-center mx-auto px-auto mb-5",attrs:{name:"list"}},t._l(t.invites,(function(e){return a("InviteItem",{key:e.id,attrs:{"invite-data-data-prop":e},on:{modalMessage:t.printMessage}})})),1),0!==t.invites.length||t.loading?t._e():a("p",[t._v(" Brak Zaproszeń")]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Za=[],Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"inviteItem col-11 col-sm-7 col-md-5 col-lg-3 m-2"},[a("div",{staticClass:"content row rounded justify-content-between align-items-center\n  shadow col-12 p-2 mx-auto px-auto",on:{click:t.more}},[a("b-icon-person-plus",{attrs:{"font-scale":"2"}}),a("div",[t._v(" "+t._s(t.inviteData.group.name)+" ")]),a("b-icon-triangle-fill",{attrs:{"font-scale":"1",rotate:t.degrees}}),t.showMore?a("div",{staticClass:"col-12 mt-2"},[a("b-button",{staticClass:"shadow mr-1",on:{click:function(e){return t.acceptInvite(!0)}}},[t._v("Akceptuj")]),a("b-button",{staticClass:"shadow ml-1",on:{click:function(e){return t.acceptInvite(!1)}}},[t._v("Odrzuć")])],1):t._e()],1)])},Ha=[],Ja={name:"InviteItem",props:{inviteDataDataProp:{type:Object,required:!0}},data:function(){return{inviteData:null,showMore:!1,degrees:180}},methods:{more:function(){this.showMore=!this.showMore,this.degrees=180===this.degrees?0:180},acceptInvite:function(t){var e=this,a=new FormData;a.append("isAccepted",t),a.append("idGroup",this.inviteData.idGroup),this.axios.post("/group/invite",a).then((function(){var a=t?"Zaproszenie zostało zakceptowane":"Zaproszenie zostało odrzucone";e.$emit("modalMessage",[a,e.inviteData.id])})).catch((function(t){e.$emit("modalMessage",["",e.inviteData.id,t.response.status])}))}},created:function(){this.inviteData=this.inviteDataDataProp,this.inviteData.date=this.$dayjs(this.inviteData.date).format("YYYY-MM-DD HH:mm:ss")}},Ka=Ja,Qa=(a("2ec3"),Object(x["a"])(Ka,Ba,Ha,!1,null,"b229523e",null)),Xa=Qa.exports,ti={name:"Invites",components:{InviteItem:Xa},data:function(){return{invites:[]}},methods:{printMessage:function(t){t[2]?this.fetchErr(t[2]):(this.invites=this.invites.filter((function(e){return e.id!==t[1]})),this.showMessage(t[0],"Zaproszenie"))}},mounted:function(){var t=this;this.loading=!0,this.axios.get("/group/invites").then((function(e){t.invites=e.data.data,t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},ei=ti,ai=(a("68ed"),Object(x["a"])(ei,Wa,Za,!1,null,"4c049a42",null)),ii=ai.exports,si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-lg-8 col-xl-5 p-0 mb-3 py-3",attrs:{id:"settingsWrapper"}},[a("h2",[t._v("Informacje")]),a("div",{staticClass:"row justify-content-center align-items-center mb-3 mt-2"},[a("b-avatar",{staticClass:"mr-1",attrs:{variant:"light",src:t.avatarLink}}),a("h3",{staticClass:"mt-3 justify-content-center text-red px-3"},[t._v(" "+t._s(t.login)+" ")])],1),a("div",{staticClass:"my-3"},[t._v(" "+t._s(t.email)+" ")]),a("div",[a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.toEditInfo}},[t._v(" Edytuj ")]),a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.toEditPassword}},[t._v(" Zmień Hasło ")]),a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.showConfirmModal}},[t._v(" Usuń ")])],1)])},oi=[],ni={name:"Settings",data:function(){return{login:"",avatarLink:"",email:""}},methods:{toEditInfo:function(){this.$router.push({path:"/settings/edit"})},toEditPassword:function(){this.$router.push({path:"/settings/password"})},showConfirmModal:function(){var t=this;this.confirmModalValue="",this.$bvModal.msgBoxConfirm("Czy na pewno chcesz usunąć?",{okTitle:"Tak",cancelTitle:"Nie"}).then((function(e){e&&(t.loading=!0,t.axios.post("/user/remove").then((function(){t.$store.dispatch("loginOut").then((function(){t.showMessage("Twoje konto zostało usunięte, aby je przywrócić sprawdź mail.","Usunięcie konta","login")})),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1})))}))}},created:function(){var t=this;this.login=this.$store.getters.login,this.avatarLink="".concat("http://77.55.214.54:8000/api/","user/avatar/").concat(this.$store.getters.userId),this.loading=!0,this.axios.get("/user/info").then((function(e){t.email=e.data.data,t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},ri=ni,li=(a("a2a2"),Object(x["a"])(ri,si,oi,!1,null,"2cb5eea5",null)),di=li.exports,ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-8 darkBg col-md-7 col-lg-5 col-xl-4 p-3",attrs:{id:"editUserInfoWrapper"}},[a("h2",{staticClass:"mb-3 greenText"},[t._v(" Ustawienia ")]),a("b-form",{staticClass:"d-flex flex-column col-10 mx-auto"},[a("b-form-group",{attrs:{"invalid-feedback":t.validationMessages.login,state:t.validationRequiredStates.login}},[a("b-form-input",{staticClass:"mt-3",attrs:{placeholder:"Login",state:t.validationRequiredStates.login,size:"sm"},on:{input:t.validateLogin},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})],1),a("b-form-group",{attrs:{"invalid-feedback":t.validationMessages.email,state:t.validationRequiredStates.email}},[a("b-form-input",{staticClass:"mt-3",attrs:{placeholder:"E-mail",state:t.validationRequiredStates.email,size:"sm"},on:{input:t.validateEmail},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("b-form-group",{attrs:{"invalid-feedback":t.validationMessages.avatar,state:t.validationNotRequiredStates.avatar}},[a("b-form-file",{staticClass:"mt-3 text-left",attrs:{placeholder:"Wgraj avatar","drop-placeholder":"Wgraj avatar",state:t.validationNotRequiredStates.avatar,size:"sm"},on:{change:function(e){return t.uploadAvatar(e)}}})],1),a("b-button",{staticClass:"mt-3 mx-auto shadow font-weight-bold btnGreen",on:{click:t.save}},[t._v(" Zapisz ")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},ui=[],mi={name:"EditUserInfo",data:function(){return{validationRequiredStates:{login:null,email:null},validationNotRequiredStates:{avatar:null},validationMessages:{},login:"",oldLogin:"",email:"",oldEmail:"",userAvatar:""}},methods:{checkLoginavailability:function(){var t=this;this.validationRequiredStates.login=!0,this.validationMessages.login="",this.login!==this.oldLogin&&this.axios.get("/user/checkLogin?login=".concat(this.login)).then((function(e){!0===e.data.message?(t.validationRequiredStates.login=!1,t.validationMessages.login=" Login jest już w użyciu."):t.validationRequiredStates.login=!0}))},checkEmailavailability:function(){var t=this;this.validationRequiredStates.email=!0,this.validationMessages.email="",this.email!==this.oldEmail&&this.axios.get("/user/checkEmail?email=".concat(this.email)).then((function(e){!0===e.data.message?(t.validationRequiredStates.email=!1,t.validationMessages.email=" E-mail jest już w użyciu."):t.validationRequiredStates.email=!0}))},uploadAvatar:function(t){var e=[t.target.files[0]];this.userAvatar=e[0],this.validationMessages.avatar="",this.validationNotRequiredStates.avatar=!0;var a=["JPG","PNG"],i=this.userAvatar.name.split(".").pop().toUpperCase(),s=a.find((function(t){return t===i}));void 0===s&&(this.validationNotRequiredStates.avatar=!1,this.validationMessages.avatar+="Tylko jpg i png"),this.userAvatar.size>1024e3&&(this.validationNotRequiredStates.avatar=!1,this.validationMessages.avatar+="Maksymalny rozmiar avatara to 1 mb.")},validateLogin:function(){this.validationRequiredStates.login=!0,this.validationMessages.login="",/^[a-zA-Z0-9]([_-](?![_-])|[a-zA-Z0-9]){3,19}[a-zA-Z0-9]$/.test(this.login)?this.checkLoginavailability():(this.validationRequiredStates.login=!1,this.login.length<5&&(this.validationMessages.login+="- jest zbyt krótki "),this.login.length>21&&(this.validationMessages.login+="- jest za długi "),/^[a-zA-Z0-9]/.test(this.login)||(this.validationMessages.login+="- musi rozpoczynać się od litery lub cyfry "),/[a-zA-Z0-9]$/.test(this.login)||(this.validationMessages.login+="- musi kończyć się literą lub cyfrą "),/^[a-zA-Z0-9_-]*$/.test(this.login)||(this.validationMessages.login+="- może zawierać litery i cyfry oraz - i _ "),/[_-]{2,}/.test(this.login)&&(this.validationMessages.login+="- _ i - nie mogą występować podwójnie lub obok siebie"))},validateEmail:function(){this.validationRequiredStates.email=!0,this.validationMessages.email="",/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(this.email)?this.checkEmailavailability():(this.validationRequiredStates.email=!1,this.validationMessages.email=" E-mail jest nieprawidłowy")},validateAll:function(){this.validateLogin(),this.validateEmail()},save:function(){var t=this;this.validateAll();var e=Object.values(this.validationRequiredStates).find((function(t){return!1===t}));if(void 0===e){var a=new FormData;a.append("login",this.login),a.append("email",this.email),this.validationNotRequiredStates.avatar&&a.append("userAvatar",this.userAvatar),this.loading=!0,this.axios({method:"post",url:"/user/info/edit",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(){var e=t.email===t.oldEmail?"Informacje zostały zmienione":"Informacje zostały zmienione. Zmiane e-mail musisz potwierdzić poprzez link wysłany w wiadomości na twój stary e-mail.,";t.showMessage(e,"Informacje o użytkowniku","/settings"),t.$store.dispatch("setLogin",t.login),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}}},created:function(){var t=this;this.login=this.oldLogin=this.$store.getters.login,this.loading=!0,this.axios.get("/user/info").then((function(e){t.email=t.oldEmail=e.data.data,t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},pi=mi,fi=(a("c96f"),Object(x["a"])(pi,ci,ui,!1,null,"2ab18f5b",null)),gi=fi.exports,hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-8 darkBg col-md-7 col-lg-5 col-xl-4 p-3",attrs:{id:"changePasswordWrapper"}},[a("h2",{staticClass:"mb-3 greenText"},[t._v(" Zmiana Hasła ")]),a("b-form",{staticClass:"d-flex flex-column col-10 mx-auto"},[a("b-form-group",{attrs:{label:"Stare Hasło","invalid-feedback":t.validationMessages.oldPassword,state:t.validationRequiredStates.oldPassword}},[a("b-form-input",{staticClass:"mt-3",attrs:{type:"password",placeholder:"Hasło",state:t.validationRequiredStates.oldPassword,size:"sm"},on:{input:t.validateOldPassword},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),a("b-form-group",{attrs:{label:"Nowe Hasło","invalid-feedback":t.validationMessages.password,state:t.validationRequiredStates.password}},[a("b-form-input",{staticClass:"mt-3",attrs:{type:"password",placeholder:"Hasło",state:t.validationRequiredStates.password,size:"sm"},on:{input:t.validatePassword},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("b-form-group",{attrs:{label:"Powtórz Hasło","invalid-feedback":t.validationMessages.passwordTwo,state:t.validationRequiredStates.passwordTwo}},[a("b-form-input",{staticClass:"mt-3",attrs:{type:"password",placeholder:"Powtórz Hasło",state:t.validationRequiredStates.passwordTwo,size:"sm"},on:{input:t.validateTwoPassword},model:{value:t.passwordTwo,callback:function(e){t.passwordTwo=e},expression:"passwordTwo"}})],1),a("b-form-invalid-feedback",{attrs:{state:""===t.badOldPassword}},[t._v(" "+t._s(t.badOldPassword)+" ")]),a("b-button",{staticClass:"mt-3 mx-auto shadow font-weight-bold btnGreen",on:{click:t.save}},[t._v(" Zapisz ")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},vi=[],bi={name:"ChangePassword",data:function(){return{validationRequiredStates:{password:null,passwordTwo:null},validationMessages:{passwordTwo:"Hasła są od siebie różne"},password:"",passwordTwo:"",oldPassword:"",badOldPassword:""}},methods:{validateOldPassword:function(){this.validationRequiredStates.oldPassword=!0,this.validationMessages.oldPassword="",this.badOldPassword="",/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.{8,})/.test(this.oldPassword)||(this.validationRequiredStates.oldPassword=!1,this.validationMessages.oldPassword="Hasło ma nieprawidłowy format.")},validatePassword:function(){this.validationRequiredStates.password=!0,this.validationMessages.password="",/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.{8,})/.test(this.password)||(this.validationRequiredStates.password=!1,this.password.length<8&&(this.validationMessages.password+="- zbyt krótkie"),/^(?=.*[A-Z])/.test(this.password)||(this.validationMessages.password+="- musi zawierać jedną dużą literę"),/^(?=.*[a-z])/.test(this.password)||(this.validationMessages.password+="- musi zawierać jedną małą literę"),/^(?=.*[0-9])/.test(this.password)||(this.validationMessages.password+="- musi zawierać jedną cyfrę."))},validateTwoPassword:function(){this.validationRequiredStates.passwordTwo=!(this.password!==this.passwordTwo||!1===this.validationRequiredStates.password)},validateAll:function(){this.validateOldPassword(),this.validatePassword(),this.validateTwoPassword()},save:function(){var t=this;this.validateAll();var e=Object.values(this.validationRequiredStates).find((function(t){return!1===t}));if(void 0===e){var a=new FormData;a.append("oldPassword",this.oldPassword),a.append("password",this.password),this.loading=!0,this.axios({method:"post",url:"/user/password/change",data:a}).then((function(){t.showMessage("Hasło zostało zmienione","Informacje o użytkowniku","/settings"),t.loading=!1})).catch((function(e){e.response&&403===e.response.status&&(t.badOldPassword="Stare hasło jest nieprawidłowe."),t.fetchErr(e),t.loading=!1}))}}}},yi=bi,xi=(a("22ea"),Object(x["a"])(yi,hi,vi,!1,null,"d5df0fca",null)),Di=xi.exports,wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"shadow mx-auto col-11 col-sm-8 darkBg col-md-7 col-lg-5 col-xl-4 p-3\n             d-inline-block",attrs:{id:"chooseDiscardTypeWrapper"}},[a("h2",{staticClass:"greenText"},[t._v("Tworzenie Zrzutki")]),a("div",{staticClass:"col-11 col-sm-8 col-md-7 col-lg-5 col-xl-4 mx-auto"},[a("b-form-group",{staticClass:"d-flex justify-content-center",attrs:{label:"Typ zbiórki"}},[a("b-radio-group",{staticClass:"text-justify",attrs:{options:t.typeOptions},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),"group"===t.selectedType?a("b-form-group",{staticClass:"my-4 mx-auto",attrs:{label:"Grupa","invalid-feedback":t.feedback,state:t.state}},[a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.groups,state:t.state},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}},[t._v(' size="sm"> ')])],1):t._e(),a("b-button",{staticClass:"btnGreen mr-1 mx-auto",on:{click:t.goToCreate}},[t._v("Dalej")])],1),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Ci=[],ki={name:"ChooseDiscardType",data:function(){return{selectedType:"single",groups:[],selectedGroup:null,feedback:"Wybierz grupę",state:null,typeOptions:[{value:"single",text:"Pojedyńcza"},{value:"group",text:"Grupowa"}]}},methods:{goToCreate:function(){this.state=!0,"single"===this.selectedType?this.$router.push({path:"/discard/single/create"}):this.selectedGroup?this.$router.push({path:"/group/discard/add/".concat(this.selectedGroup)}):this.state=!1}},created:function(){var t=this;this.loading=!0,this.axios.get("/group/type/choose").then((function(e){e.data.data&&(t.groups=e.data.data,t.groups=t.groups.map((function(t){return{value:t.id,text:t.name}})),t.groups.unshift({value:null,text:"Wybierz"})),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},Ii=ki,_i=(a("7bd3"),Object(x["a"])(Ii,wi,Ci,!1,null,"4c9efa08",null)),Mi=_i.exports,Pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mx-auto col-12 col-md-10 col-lg-9 col-xl-8 text-white",attrs:{id:"homeWrapper"}},[a("h2",{staticClass:"my-5"},[t._v("Nieopłacone Zrzutki")]),a("b-form-input",{staticClass:"col-xl-3 col-lg-4 col-md-5 col-10 mx-auto pb-0 mb-5",attrs:{type:"search",size:"sm",placeholder:"Nazwa Zrzutki"},model:{value:t.discardNameSearch,callback:function(e){t.discardNameSearch=e},expression:"discardNameSearch"}}),a("transition-group",{staticClass:"row justify-content-center discardsList mx-auto\n col-12",class:{fewElements:t.numberOfItems<=t.itemsPerPage},attrs:{name:"list"}},t._l(t.selectedItems,(function(t){return a("DiscardListItem",{key:t.id,attrs:{"discard-data":t,"all-discards":!1}})})),1),0!==t.selectedItems.length||t.loading?t._e():a("p",{staticClass:"mt-5"},[t._v(" Brak Zrzutek")]),t.numberOfItems>t.itemsPerPage?a("b-pagination",{staticClass:"pagination",attrs:{align:"center","total-rows":t.numberOfItems,"per-page":t.itemsPerPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),a("FilterButtonsModal",{attrs:{link:"/discard/type","permission-add":!0}},[a("div",{staticClass:"row mx-auto align-items-start justify-content-center\n    mx-auto my-4 bv-d-md-down-none"},[a("div",{staticClass:"col-sm-7 col-lg-6 col-xl-5"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",[a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Od:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"align-items-center col-6",attrs:{label:"Do:","label-cols-md":"2","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-5"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",[a("PriceInput",{key:"amountFrom",staticClass:"col-6",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountTo",staticClass:"col-6",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Typ")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.typeOptions,size:"sm"},on:{change:t.clearGroupUser},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),"group"===t.selectedType?a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Grupa")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.groups,size:"sm"},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}})],1):"single"===t.selectedType?a("div",{staticClass:"col-md-3 col-xl-2"},[a("div",{staticClass:"text-left"},[t._v("Odbiorca")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.users,size:"sm"},model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}})],1):t._e(),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)]),a("div",{staticClass:"row justify-content-center mb-4 d-lg-none"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Data")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Od:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{"label-no-date-selected":"wybierz",max:t.dateTo,size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1),a("b-form-group",{staticClass:"col-6 mx-auto",attrs:{label:"Do:","label-size":"sm"}},[a("b-form-datepicker",{attrs:{min:t.dateFrom,"label-no-date-selected":"wybierz",size:"sm","date-format-options":t.datePickerFormat},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Składka")]),a("b-form-row",{staticClass:"mx-auto row justify-content-center"},[a("PriceInput",{key:"amountFromModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:0,max:t.amountTo,label:"Od:"},model:{value:t.amountFrom,callback:function(e){t.amountFrom=e},expression:"amountFrom"}}),a("PriceInput",{key:"amountToModal",staticClass:"col-6 mx-auto",attrs:{"validate-status-prop":null,min:t.amountFrom,label:"Do:"},model:{value:t.amountTo,callback:function(e){t.amountTo=e},expression:"amountTo"}})],1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"text-left"},[t._v("Typ")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.typeOptions,size:"sm"},on:{change:t.clearGroupUser},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),"group"===t.selectedType?a("div",{staticClass:"col-8 px-auto"},[a("div",{staticClass:"text-left"},[t._v("Grupa")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.groups,size:"sm"},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}})],1):"single"===t.selectedType?a("div",{staticClass:"col-8 px-auto"},[a("div",{staticClass:"text-left"},[t._v("Odbiorca")]),a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.users,size:"sm"},model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}})],1):t._e(),a("div",{staticClass:"col-8 px-auto"},[a("div",{staticClass:"text-left"},[t._v("Sortowanie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("div",{staticClass:"col-8 px-auto"},[a("div",{staticClass:"text-left"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"ml-2",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)])]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"50%",left:"50%",width:"3rem",height:"3rem"}}):t._e()],1)},Oi=[],zi={name:"Home",mixins:[S,st],components:{DiscardListItem:Fa,PriceInput:it,FilterButtonsModal:ct},data:function(){return{discards:[],discardNameSearch:"",groups:[],users:[],selectedUser:null,selectedGroup:null,amountTo:0,amountFrom:0,dateFrom:null,dateTo:null,sortingValue:5,selectedType:null,datePickerFormat:{year:"numeric",month:"numeric",day:"numeric"},typeOptions:[{value:null,text:"Wszystkie"},{value:"single",text:"Pojedyńcze"},{value:"group",text:"Grupowe"}],pageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:30,text:"30"}],sortingOptions:[{value:1,text:"Rosnąco po nazwie"},{value:2,text:"Malejąco po nazwie"},{value:3,text:"Rosnąco po pozostałe"},{value:4,text:"Malejąco po pozostałe"},{value:5,text:"Rosnąco po dacie"},{value:6,text:"Malejąco po dacie"}]}},computed:{filtredItems:function(){var t=this;if(!this.discards)return[];var e=this.discards;switch(e=e.filter((function(e){if(t.discardNameSearch&&-1===e.name.toUpperCase().indexOf(t.discardNameSearch.toUpperCase()))return!1;if(t.selectedType&&e.type!==t.selectedType)return!1;if(t.selectedGroup&&e.groupName!==t.selectedGroup)return!1;if(t.selectedUser&&e.recipient!==t.selectedUser)return!1;if(t.amountFrom&&e.amountLeft<t.amountFrom)return!1;if(t.amountTo&&e.amountLeft>t.amountTo)return!1;if(t.dateFrom){var a=t.$dayjs(t.dateFrom),i=t.$dayjs(e.dateOfPayment);if(i<a)return!1}if(t.dateTo){var s=t.$dayjs(t.dateTo),o=t.$dayjs(e.dateOfPayment);if(o>s)return!1}return!0})),this.sortingValue){case 1:e=e.sort((function(e,a){return t.sortingAsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 2:e=e.sort((function(e,a){return t.sortingDsc(e.name.toUpperCase(),a.name.toUpperCase())}));break;case 3:e=e.sort((function(e,a){return t.sortingAsc(e.amountLeft,a.amountLeft)}));break;case 4:e=e.sort((function(e,a){return t.sortingDsc(e.amountLeft,a.amountLeft)}));break;case 5:e=e.sort((function(e,a){return t.sortingAsc(e.dateOfPayment,a.dateOfPayment)}));break;default:e=e.sort((function(e,a){return t.sortingDsc(e.dateOfPayment,a.dateOfPayment)}))}return e}},methods:{clearGroupUser:function(){this.selectedGroup=null,this.selectedUser=null}},created:function(){var t=this;this.loading=!0,this.axios.get("/discard/user",{params:{isPaid:!1}}).then((function(e){if(t.discards=e.data.data,t.discards){t.discards=t.discards.map((function(e){return{id:e.idDiscardCycle.id,name:e.idDiscardCycle.idDiscard.name,dateOfPayment:t.$dayjs(e.idDiscardCycle.dateOfPayment).format("YYYY-MM-DD"),amountLeft:Number((e.amount-e.paidIn).toFixed(2)),groupName:e.idDiscardCycle.idDiscard.idGroup?e.idDiscardCycle.idDiscard.idGroup.name:null,amount:e.amount,paidIn:e.paidIn,type:e.idDiscardCycle.idDiscard.type,recipient:e.idDiscardCycle.idDiscard.idRecipient?e.idDiscardCycle.idDiscard.idRecipient.login:null}})),t.groups=t.discards.map((function(t){return t.groupName})).filter((function(t){return t})),t.groups=Object($a["a"])(new Set(t.groups)),t.groups=t.groups.map((function(t){return{value:t,text:t}})),t.groups.unshift({value:null,text:"Wybierz"}),t.users=t.discards.map((function(t){return t.recipient})).filter((function(t){return t})),t.users=Object($a["a"])(new Set(t.users)),t.users=t.users.map((function(t){return{value:t,text:t}})),t.users.push({value:null,text:"Wybierz"});var a=t.discards.map((function(t){return new Date(t.dateOfPayment)})),i=t.discards.map((function(t){return t.amountLeft}));t.dateFrom=t.$dayjs(Math.min.apply(null,a)).format("YYYY-MM-DD"),t.dateTo=t.$dayjs(Math.max.apply(null,a)).format("YYYY-MM-DD"),t.amountFrom=Math.min.apply(null,i),t.amountTo=Math.max.apply(null,i),t.loading=!1}t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},Si=zi,Ti=(a("3137"),Object(x["a"])(Si,Pi,Oi,!1,null,"abb51ec0",null)),ji=Ti.exports,Ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mx-auto col-12 col-sm-10  col-md-9",attrs:{id:"groupsWrapper"}},[a("div",{attrs:{id:"contentGroups"}},[a("h2",{staticClass:"my-5"},[t._v("Twoje Grupy")]),a("b-form-input",{staticClass:"col-xl-3 col-lg-4 col-md-5 col-10 mx-auto mb-5",attrs:{type:"search",size:"sm",placeholder:"Nazwa Grupy"},model:{value:t.groupNameSearch,callback:function(e){t.groupNameSearch=e},expression:"groupNameSearch"}}),a("transition-group",{staticClass:"row\n                         justify-content-center mb-5 mt-3",class:{fewElements:t.numberOfItems<=t.itemsPerPage},attrs:{name:"list",mode:"in-out"}},t._l(t.selectedItems,(function(e){return a("GroupItem",{key:e.id,attrs:{groupDataProp:e},on:{toDetails:t.toGroupDetails}})})),1),0!==t.filtredItems.length||t.loading?t._e():a("p",[t._v(" Brak Grup")]),t.numberOfItems>t.itemsPerPage?a("b-pagination",{staticClass:"pagination",attrs:{align:"center","total-rows":t.numberOfItems,"per-page":t.itemsPerPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1),a("FilterButtonsModal",{attrs:{link:"/addGroup","permission-add":!0}},[a("div",{staticClass:"row align-items-center col-12 justify-content-between bv-d-md-down-none mr-5"},[a("b-form-group",{staticClass:"row align-items-center justify-content-between",attrs:{label:"Sortuj:","label-for":"sortSelect","label-cols":"2","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-2",attrs:{id:"sortSelect",options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("b-form-group",{staticClass:"row align-items-center justify-content-between",attrs:{label:"Gdzie jestem:","label-for":"membershipSelect","label-cols":"2","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-2",attrs:{id:"membershipSelect",options:t.membershipOptions,size:"sm"},model:{value:t.membershipValue,callback:function(e){t.membershipValue=e},expression:"membershipValue"}})],1),a("b-form-group",{staticClass:"row align-items-center justify-content-between",attrs:{label:"Na stronie:","label-for":"perPageSelect","label-cols":"2","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-4",attrs:{id:"perPageSelect",options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)],1),a("div",{staticClass:"d-lg-none"},[a("b-form-group",{staticClass:"mx-auto",attrs:{label:"Sortuj:","label-for":"sortSelect","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-1",attrs:{id:"sortSelect",options:t.sortingOptions,size:"sm"},model:{value:t.sortingValue,callback:function(e){t.sortingValue=e},expression:"sortingValue"}})],1),a("b-form-group",{staticClass:"mx-auto",attrs:{label:"Gdzie jestem:","label-for":"membershipSelect","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-1",attrs:{id:"membershipSelect",options:t.membershipOptions,size:"sm"},model:{value:t.membershipValue,callback:function(e){t.membershipValue=e},expression:"membershipValue"}})],1),a("b-form-group",{staticClass:"mx-auto",attrs:{label:"Na stronie:","label-for":"perPageSelect","label-size":"sm"}},[a("b-form-select",{staticClass:"ml-1",attrs:{id:"perPageSelect",options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1)],1)]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},$i=[],Ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"groupItem col-11 col-sm-7 col-md-5 col-lg-3 m-2 p-2\nrow rounded align-items-center shadow justify-content-between",on:{click:function(e){return t.$emit("toDetails",t.groupDataProp.id)}}},[a("b-avatar",{attrs:{variant:"light",src:t.groupData.logo}}),a("div",{staticClass:"col-8"},[t._v(" "+t._s(t.groupData.name)+" ")]),a("b-icon-triangle-fill",{attrs:{"font-scale":"1",rotate:"90"}})],1)},Gi=[],Ri={name:"GroupItem",props:{groupDataProp:{type:Object,required:!0}},data:function(){return{groupData:null}},created:function(){this.groupData=this.groupDataProp,this.groupData.logo="".concat("http://77.55.214.54:8000/api/","group/logo/").concat(this.groupData.id)}},Yi=Ri,Ai=(a("c014"),Object(x["a"])(Yi,Ei,Gi,!1,null,null,null)),Fi=Ai.exports,qi={name:"Groups",mixins:[S,st],components:{GroupItem:Fi,FilterButtonsModal:ct},data:function(){return{groupNameSearch:"",sortingValue:null,itemsPerPage:20,membershipValue:null,pageOptions:[{value:20,text:"20"},{value:40,text:"40"},{value:60,text:"60"}],membershipOptions:[{value:null,text:"Wszystko"},{value:"owner",text:"Administratorem"},{value:"member",text:"Członkiem."}],sortingOptions:[{value:null,text:"Wybierz"},{value:1,text:"Rosnąco po nazwie"},{value:2,text:"Malejąco po nazwie"}],groups:[]}},computed:{filtredItems:function(){var t=this;if(!this.groups)return[];this.loading=!0;var e=this.groups;return this.membershipValue&&(e=e.filter((function(e){return e.permission===t.membershipValue}))),1===this.sortingValue?e=e.sort((function(e,a){return t.sortingAsc(e.name,a.name)})):2===this.sortingValue&&(e=e.sort((function(e,a){return t.sortingDsc(e.name,a.name)}))),this.groupNameSearch&&(e=e.filter((function(e){return e.name.toUpperCase().indexOf(t.groupNameSearch.toUpperCase())>-1}))),this.loading=!1,e}},methods:{toGroupDetails:function(t){this.$router.push({path:"/group/details/".concat(t)})}},created:function(){var t=this;this.loading=!0,this.axios.get("/group/userGroups").then((function(e){t.groups=e.data.data,t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},Li=qi,Ui=(a("ce8e"),Object(x["a"])(Li,Ni,$i,!1,null,"e4363f0a",null)),Vi=Ui.exports,Wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GroupForm",{attrs:{idEdit:!1}})},Zi=[],Bi={name:"AddGroup",components:{GroupForm:Tt}},Hi=Bi,Ji=Object(x["a"])(Hi,Wi,Zi,!1,null,"68607032",null),Ki=Ji.exports,Qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mx-auto col-12 col-sm-10  col-md-10 text-white",attrs:{id:"notificationsWrapper"}},[a("h2",{staticClass:"my-5"},[t._v("Powiadomienia")]),t.numberOfItems>0?a("div",{staticClass:"my-2"},[a("b-button",{staticClass:"mx-1 btnGreen shadow",on:{click:t.checkAll}},[t._v("Zaznacz wszystkie")]),a("b-button",{staticClass:"mx-1 btnGreen shadow",on:{click:t.deleteNotifications}},[t._v("Usuń")])],1):t._e(),a("transition-group",{staticClass:"row justify-content-center mx-auto px-auto mb-5",class:{fewElements:t.numberOfItems<=t.itemsPerPage},attrs:{name:"list"}},t._l(t.selectedItems,(function(e){return a("NotificationsItem",{key:e.id,attrs:{notificationData:e},on:{"update:notificationData":function(t){e=t},"update:notification-data":function(t){e=t},modalMessage:t.printMessage,toDetails:t.toDetails}})})),1),0!==t.selectedItems.length||t.loading?t._e():a("p",[t._v(" Brak Powiadomień")]),t.numberOfItems>t.itemsPerPage?a("div",{staticClass:"col-10 col-sm-9 col-md-7 col-lg-5 col-xl-3 my-3 mx-auto"},[a("div",{staticClass:"mx-auto"},[t._v("Na stronie")]),a("b-form-select",{staticClass:"col-3 mx-auto",attrs:{options:t.pageOptions,size:"sm"},on:{change:t.perPageChange},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1):t._e(),t.numberOfItems>t.itemsPerPage?a("b-pagination",{staticClass:"pagination",attrs:{align:"center","total-rows":t.numberOfItems,"per-page":t.itemsPerPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},Xi=[],ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"notificationItem col-11 col-sm-7 col-md-5 col-lg-3 m-2"},[a("div",{staticClass:"content row rounded align-items-center shadow col-12 p-2 mx-auto px-auto",style:{backgroundColor:t.bgColor}},[a("div",{staticClass:"d-flex justify-content-around align-items-center"},[a("b-icon",{attrs:{icon:t.icon,"font-scale":"2"}}),a("div",{staticClass:"col-10 my-1",on:{click:function(e){return t.$emit("toDetails",t.link)}}},[a("div",{staticClass:"text-justify"},[t._v(" "+t._s(t.notificationData.message)+" ")]),a("div",{staticClass:"notificationDate text-right font-weight-bold"},[t._v(" "+t._s(t.notificationData.date)+" ")])]),a("b-form-checkbox",{model:{value:t.notificationData.checked,callback:function(e){t.$set(t.notificationData,"checked",e)},expression:"notificationData.checked"}})],1)])])},es=[],as=(a("9911"),{name:"NotificationsItem",props:{notificationData:{type:Object,required:!0}},data:function(){return{link:"",bgColor:"#148a14",notification:null,icon:""}},created:function(){switch(this.notificationData.date=this.$dayjs(this.notificationData.date).format("YYYY-MM-DD HH:mm:ss"),this.bgColor=!0===this.notificationData.read?"#1C1919":"#148a14",this.notificationData.type){case"invite":this.link="/invites",this.icon="person-plus";break;case"groupInfo":this.link="/group/details/".concat(this.notificationData.idOfEvent),this.icon="people-fill";break;case"newDiscard":this.link="discard/details/0/".concat(this.notificationData.idOfEvent),this.icon="cash-stack";break;case"newGroupPayment":this.link="discard/details/2/".concat(this.notificationData.idOfEvent),this.icon="cash-stack";break;case"newSinglePayment":this.link="discard/single/details/".concat(this.notificationData.idOfEvent),this.icon="cash";break;case"changeSinglePaymentState":this.link="discard/single/details/".concat(this.notificationData.idOfEvent),this.icon="cash";break;case"changeGroupPaymentState":this.link="discard/details/0/".concat(this.notificationData.idOfEvent),this.icon="cash";break;case"modifedDiscardObligations":this.link="discard/details/0/".concat(this.notificationData.idOfEvent),this.icon="cash-stack";break;case"modifedDiscardInfo":this.link="discard/details/0/".concat(this.notificationData.idOfEvent),this.icon="cash-stack";break;case"modifedSingleDiscardInfo":this.link="discard/single/details/".concat(this.notificationData.idOfEvent),this.icon="cash-stack";break;case"changeGroupInviteState":this.link="/group/details/".concat(this.notificationData.idOfEvent),this.icon="people-fill";break;case"removedFromGroup":this.link="/groups",this.icon="people-fill";break;default:this.link=null}}}),is=as,ss=(a("19bc"),Object(x["a"])(is,ts,es,!1,null,"b1dc5f40",null)),os=ss.exports,ns={name:"Notifications",mixins:[st,S],components:{NotificationsItem:os},data:function(){return{notifications:[],pageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:30,text:"30"}]}},methods:{printMessage:function(t){t[2]?this.fetchErr(t[2]):(this.notifications=this.notifications.filter((function(e){return e.id!==t[1]})),this.showMessage(t[0],"Zaproszenie"))},toDetails:function(t){t&&this.$router.push({path:t})},checkAll:function(){this.notifications.forEach((function(t){t.checked=!0}))},deleteNotifications:function(){var t=this,e=this.notifications.filter((function(t){return t.checked})).map((function(t){return t.id}));if(e.length){var a=new FormData;a.append("notifications",JSON.stringify(e)),this.axios({method:"post",url:"/notification/delete",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.notifications=t.notifications.filter((function(t){return!t.checked})),t.showMessage("Powiadomienia zostały usunięte","Usuwanie powiadomień","")})).catch((function(e){t.fetchErr(e)}))}}},computed:{filtredItems:function(){var t=this;return this.notifications.sort((function(e,a){return t.sortingDsc(e.date,a.date)}))}},mounted:function(){var t=this;this.loading=!0,this.axios.get("/notification/all").then((function(e){t.notifications=e.data.data,t.notifications=t.notifications.map((function(t){return Object(Yt["a"])(Object(Yt["a"])({},t),{},{checked:!1})})),t.notifications=t.notifications.sort((function(e,a){return t.sortingAsc(e.date,a.date)})),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}},rs=ns,ls=(a("06f4"),Object(x["a"])(rs,Qi,Xi,!1,null,"43c0749b",null)),ds=ls.exports,cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mx-auto col-11 col-lg-8 col-xl-5 p-0 mb-3",attrs:{id:"groupDiscardDetailsWrapper"}},[a("div",{staticClass:"content shadow"},[a("div",{staticClass:"greenBadge col-12 row justify-content-between align-items-center mx-0 py-1"},[t.permission?a("b-icon-triangle-fill",{staticClass:"my-2",attrs:{rotate:"270"},on:{click:function(e){return t.changeOverlap(-1)}}}):t._e(),a("h2",{staticClass:"mt-3 mx-auto"},[t._v(" "+t._s(t.overlaps[t.currentOverlap])+" ")]),t.permission?a("b-icon-triangle-fill",{staticClass:"my-2",attrs:{rotate:"90"},on:{click:function(e){return t.changeOverlap(1)}}}):t._e()],1),a("div",{staticClass:"py-4 px-4"},[a("div",{staticClass:"my-4 h2"},[t._v(" "+t._s(t.discardInfo.idDiscard.name)+" ")]),"Informacje"===t.overlaps[t.currentOverlap]?a("GroupDiscardInfo",{attrs:{discardId:t.discardId},on:{toPayment:t.toPayment,toEditInfo:t.toEditInfo}}):t._e(),"Należności"===t.overlaps[t.currentOverlap]?a("GroupDiscardObligations",{on:{toEditObligations:t.toEditObligations}}):t._e(),"Wpłaty"===t.overlaps[t.currentOverlap]?a("GroupDiscardPayment",{attrs:{"payments-data":t.payments,"discard-id":t.discardId}}):t._e()],1)]),t.loading?a("b-spinner",{staticStyle:{position:"fixed",top:"49%",left:"49%",width:"3rem",height:"3rem"}}):t._e()],1)},us=[],ms={computed:{discardInfo:function(){var t=this.$store.getters.discardDetailsInfo;return t.dateOfPayment=this.$dayjs(t.dateOfPayment).format("YYYY-MM-DD"),t},userObligation:function(){return this.$store.getters.discardDetailsUserObligation},payments:function(){return this.$store.getters.discardDetailsPayments},permission:function(){return this.$store.getters.discardDetailsUserPermission},allObligations:function(){return this.$store.getters.discardDetailsAllObligation}}},ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"groupDiscardInfoWrapper"}},[t.discardInfo.idDiscard?a("div",{staticClass:"row mx-auto justify-content-center mb-3"},[a("div",[t._v("Grupa:")]),a("a",{attrs:{href:""},on:{click:t.toGroup}},[t._v(t._s(t.discardInfo.idDiscard.idGroup.name))])]):t._e(),a("div",{staticClass:"my-3 font-weight-bold"},[t._v(" Termin: "),a("span",{staticClass:"greenText"},[t._v(" "+t._s(t.discardInfo.dateOfPayment)+" ")])]),a("div",{staticClass:"my-4"},[t.discardInfo.idDiscard.description?a("div",[t._v(" "+t._s(t.discardInfo.idDiscard.description)+" ")]):a("div",[t._v(" Brak Opisu ")])]),t.userObligation?a("div",{staticClass:"py-3"},[a("div",{staticClass:"h3"},[t._v(" Twoja należność ")]),a("div",{staticClass:"h3"},[t._v(" "+t._s(t.userObligation.amount)+" ")]),t.userObligation.paidIn>0&&!t.isPaid?a("div",{staticClass:"my-3"},[a("div",{staticClass:"h3"},[t._v(" Wpłacono ")]),a("div",{staticClass:"h3"},[t._v(" "+t._s(t.userObligation.paidIn)+" ")])]):t._e(),t.isPaid?a("div",{staticClass:"greenText font-weight-bold"},[t._v(" Zapłacono ")]):t._e()]):t._e(),a("div",[t.showPaymentButton?a("b-button",{staticClass:"btnGreen mx-1",on:{click:function(e){return t.$emit("toPayment")}}},[t._v(" Zapłać ")]):t._e(),t.permission?a("b-button",{staticClass:"btnGreen mx-1",on:{click:function(e){return t.$emit("toEditInfo")}}},[t._v(" Edytuj ")]):t._e(),t.permission?a("b-button",{staticClass:"btnGreen mx-1",on:{click:t.showConfirmModal}},[t._v(" Usuń ")]):t._e()],1)])},fs=[],gs={name:"GroupDiscardInfo",mixins:[ms],props:{discardId:{type:String,required:!0}},data:function(){return{confirmModalValue:""}},computed:{isPaid:function(){return!!this.userObligation&&this.userObligation.paidIn>=this.userObligation.amount},showPaymentButton:function(){return!!this.userObligation&&!this.isPaid}},methods:{toGroup:function(){this.$router.push("/group/details/".concat(this.discardInfo.idDiscard.idGroup.id))},showConfirmModal:function(){var t=this;this.confirmModalValue="",this.$bvModal.msgBoxConfirm("Czy na pewno chcesz usunąć?",{okTitle:"Tak",cancelTitle:"Nie"}).then((function(e){if(e){t.loading=!0;var a=new FormData;a.append("discardCycleId",t.discardId),t.axios.post("/discard/group/delete",a).then((function(){t.showMessage("Zrzutka została usunięta.","Usunięcie zrzutki","/"),t.loading=!1})).catch((function(e){t.fetchErr(e),t.loading=!1}))}}))}}},hs=gs,vs=Object(x["a"])(hs,ps,fs,!1,null,"92ba0764",null),bs=vs.exports,ys=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"groupDiscardObligationsWrapper"},[a("div",{staticClass:"col-12 col-sm-8 mx-auto font-weight-bold mb-3"},[t._m(0),t._l(t.obligationsData,(function(t){return a("DiscardObligationItem",{key:t.id,attrs:{"obligation-data":t}})})),a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-4"},[t._v("Suma")]),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v(" "+t._s(t.amountsSum)+" ")]),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v(" "+t._s(t.paidInSum)+" ")])])],2),t.permission?a("b-button",{staticClass:"btnGreen mr-1",on:{click:function(e){return t.$emit("toEditObligations")}}},[t._v(" Edytuj ")]):t._e()],1)},xs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v("Należność")]),a("div",{staticClass:"col-3 editDiscardColumnNames"},[t._v("Wpłata")])])}],Ds={name:"GroupDiscardObligations",mixins:[ms],components:{DiscardObligationItem:Ve},data:function(){return{amountsSum:0,paidInSum:0,obligationsData:[]}},created:function(){var t=this;this.obligationsData=this.allObligations,this.obligationsData.forEach((function(e){t.paidInSum+=e.paidIn,t.amountsSum+=e.amount}))}},ws=Ds,Cs=(a("5983"),Object(x["a"])(ws,ys,xs,!1,null,"46589256",null)),ks=Cs.exports,Is=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"groupDiscardPaymentWrapper"}},[t.payments.length?a("div",{staticClass:"col-12 col-sm-9 col-md-8 col-xl-6 mx-auto"},t._l(t.payments,(function(e){return a("GroupDiscardPaymentItem",{key:e.id,attrs:{"payment-data":e},on:{modalMessage:t.printMessage}})})),1):a("div",[t._v(" Brak Nowych Wpłat ")]),a("b-modal",{attrs:{id:"modalPayment","hide-footer":"",title:"Płatność"}},[a("p",{staticClass:"my-4"},[t._v(t._s(t.modalInfo)+"!")]),a("b-button",{staticClass:"mt-3",attrs:{id:"buttonModal"},on:{click:function(e){return t.$bvModal.hide("modalPayment")}}},[t._v(" Ok ")])],1)],1)},_s=[],Ms={name:"GroupDiscardPayment",mixins:[ms],props:{discardId:{type:String}},components:{GroupDiscardPaymentItem:wa},data:function(){return{modalInfo:""}},methods:{printMessage:function(t){t[2]?this.fetchErr(t[2]):(this.$store.dispatch("getDiscardDetails",this.discardId),this.modalInfo=t[0],this.$bvModal.show("modalPayment"))}}},Ps=Ms,Os=(a("87d1"),Object(x["a"])(Ps,Is,_s,!1,null,null,null)),zs=Os.exports,Ss={name:"GroupDiscardDetails",mixins:[S,ms],components:{GroupDiscardInfo:bs,GroupDiscardObligations:ks,GroupDiscardPayment:zs},props:["discardId","overlap"],data:function(){return{currentOverlap:Number(this.overlap),overlaps:["Informacje","Należności","Wpłaty"],lastRoute:""}},methods:{changeOverlap:function(t){var e=this.permission?2:0;this.currentOverlap===e&&1===t?this.currentOverlap=0:0===this.currentOverlap&&-1===t?this.currentOverlap=e:this.currentOverlap+=t},toPayment:function(){this.$router.push({path:"/payment/group/".concat(this.discardId)})},toEditObligations:function(){this.$router.push({path:"/group/obligations/edit/".concat(this.discardId)})},toEditInfo:function(){this.$router.push({path:"/discard/info/edit/".concat(this.discardId)})}},created:function(){var t=this;this.loading=!0,this.$store.dispatch("getDiscardDetails",this.discardId).then((function(e){if(e)return t.discardInfo.dateOfPayment=t.$dayjs(t.discardInfo.dateOfPayment).format("YYYY-MM-DD"),void(t.loading=!1);t.showMessage("Coś poszło nie tak","Edycja zrzutki","groups"),t.loading=!1})).catch((function(e){t.loading=!1,t.fetchErr(e)}))}},Ts=Ss,js=(a("d8df"),Object(x["a"])(Ts,cs,us,!1,null,"31863c51",null)),Ns=js.exports;i["default"].use(M["a"]);var $s=[{path:"/",name:"Home",component:ji},{path:"/groups",name:"Groups",component:Vi},{path:"/notifications",name:"Notifications",component:ds},{path:"/addGroup",name:"AddGroup",component:Ki},{path:"/group/details/:groupId",name:"GroupDetails",component:bt,props:!0},{path:"/group/edit/:groupId",name:"EditGroup",component:Et,props:!0},{path:"/group/edit/members/:groupId",name:"EditGroupMembers",component:Ht,props:!0},{path:"/group/discard/add/:groupId",name:"AddGroupDiscard",component:Se,props:!0},{path:"/discard/details/:overlap/:discardId",name:"GroupDiscardDetails",component:Ns,props:!0},{path:"/payment/:type/:discardId",name:"Payment",component:Ge,props:!0},{path:"/group/obligations/edit/:discardId",name:"GroupDiscardEditObligation",component:He,props:!0},{path:"/discard/info/edit/:discardId",name:"GroupDiscardEdit",component:ea,props:!0},{path:"/discard/single/create",name:"SingleDiscardCreate",component:fa},{path:"/discard/single/details/:discardId",name:"SingleDiscardDetails",component:_a,props:!0},{path:"/discard/single/edit/:discardId",name:"SingleDiscardEdit",component:Ta,props:!0},{path:"/discards/",name:"Discards",component:Va},{path:"/invites/",name:"Invites",component:ii},{path:"/settings",name:"Settings",component:di},{path:"/settings/edit",name:"EditUserInfo",component:gi},{path:"/settings/password",name:"ChangePassword",component:Di},{path:"/discard/type",name:"ChooseDiscardType",component:Mi},{path:"/*",redirect:{name:"Home"}}],Es=new M["a"]({mode:"history",base:"/",routes:$s}),Gs=Es,Rs=a("4360");o.a.defaults.baseURL="http://77.55.214.54:8000/api/",o.a.defaults.headers.common["authorization-token"]=Rs["a"].state.userData.token,i["default"].config.productionTip=!1,i["default"].use(l.a,o.a),i["default"].use(d["a"]),i["default"].use(c["a"]),i["default"].use(n["a"],{}),i["default"].mixin(u["a"]),i["default"].mixin(p.a),new i["default"]({router:Gs,store:Rs["a"],render:function(t){return t(_)}}).$mount("#app")},f96c:function(t,e,a){"use strict";var i=a("49ed"),s=a.n(i);s.a},fa44:function(t,e,a){"use strict";var i=a("04b0"),s=a.n(i);s.a},ff01:function(t,e,a){}});
//# sourceMappingURL=index.ae1d8005.js.map